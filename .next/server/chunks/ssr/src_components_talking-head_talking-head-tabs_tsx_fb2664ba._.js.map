{"version":3,"sources":["../../../../src/components/talking-head/step-transcript.tsx","../../../../src/components/talking-head/step-script-edit.tsx","../../../../src/lib/cost-estimation.ts","../../../../src/components/talking-head/step-voice-gen.tsx","../../../../src/components/talking-head/step-image-select.tsx","../../../../node_modules/%40radix-ui/react-switch/dist/index.mjs","../../../../src/components/ui/switch.tsx","../../../../node_modules/%40radix-ui/react-tooltip/dist/index.mjs","../../../../src/components/ui/tooltip.tsx","../../../../src/app/dashboard/tools/talking-head/data%3A4b4db2%20%3Ctext/javascript%3E","../../../../src/components/talking-head/talking-head-tabs.tsx","../../../../src/app/dashboard/tools/talking-head/data%3A869059%20%3Ctext/javascript%3E","../../../../src/app/dashboard/tools/talking-head/data%3A2dc0e3%20%3Ctext/javascript%3E","../../../../src/components/talking-head/step-video-url.tsx","../../../../src/components/talking-head/bulk-talking-head.tsx","../../../../src/components/talking-head/caption-customizer.tsx","../../../../src/components/talking-head/step-video-gen.tsx","../../../../src/components/talking-head/step-preview.tsx","../../../../src/components/talking-head/talking-head-wizard.tsx","../../../../node_modules/lucide-react/src/icons/captions.ts","../../../../node_modules/lucide-react/src/icons/user.ts","../../../../node_modules/lucide-react/src/icons/rotate-ccw.ts","../../../../node_modules/%40radix-ui/react-switch/src/switch.tsx","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../node_modules/lucide-react/src/icons/palette.ts","../../../../node_modules/lucide-react/src/icons/pen-line.ts","../../../../src/lib/caption-styles.ts"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { FileText, ArrowRight } from \"lucide-react\";\n\ninterface StepTranscriptProps {\n  transcript: string;\n  onUseAsScript: () => void;\n}\n\nfunction countWords(text: string): number {\n  return text\n    .trim()\n    .split(/\\s+/)\n    .filter((w) => w.length > 0).length;\n}\n\nexport function StepTranscript({\n  transcript,\n  onUseAsScript,\n}: StepTranscriptProps) {\n  const wordCount = countWords(transcript);\n\n  // If user skipped transcription (empty transcript), go straight to edit\n  if (!transcript.trim()) {\n    return (\n      <div className=\"max-w-xl mx-auto space-y-4 text-center\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center\">\n          <FileText className=\"h-6 w-6 text-muted-foreground\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">No Transcript</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          You skipped transcription. Continue to write your script manually.\n        </p>\n        <Button onClick={onUseAsScript} size=\"lg\">\n          Write Script\n          <ArrowRight className=\"h-4 w-4 ml-2\" />\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <FileText className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Transcript Ready</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Review the transcription below. You&apos;ll be able to edit it in the\n          next step.\n        </p>\n      </div>\n\n      <div className=\"rounded-lg bg-card p-4 space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm font-medium\">Transcription</span>\n          <Badge variant=\"secondary\">\n            {wordCount} {wordCount === 1 ? \"word\" : \"words\"}\n          </Badge>\n        </div>\n        <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">\n          {transcript}\n        </p>\n      </div>\n\n      <Button onClick={onUseAsScript} className=\"w-full\" size=\"lg\">\n        Continue to Edit Script\n        <ArrowRight className=\"h-4 w-4 ml-2\" />\n      </Button>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Edit3 } from \"lucide-react\";\n\ninterface StepScriptEditProps {\n  script: string;\n  onScriptChange: (script: string) => void;\n}\n\nfunction countWords(text: string): number {\n  return text\n    .trim()\n    .split(/\\s+/)\n    .filter((w) => w.length > 0).length;\n}\n\nexport function StepScriptEdit({\n  script,\n  onScriptChange,\n}: StepScriptEditProps) {\n  const wordCount = countWords(script);\n  const charCount = script.length;\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <Edit3 className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Edit Script</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Edit the script that will be converted to speech. Remove filler words,\n          fix errors, or rewrite as needed.\n        </p>\n      </div>\n\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <Label htmlFor=\"script\">Script</Label>\n          <div className=\"flex gap-2\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {wordCount} {wordCount === 1 ? \"word\" : \"words\"}\n            </Badge>\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {charCount} chars\n            </Badge>\n          </div>\n        </div>\n        <Textarea\n          id=\"script\"\n          value={script}\n          onChange={(e) => onScriptChange(e.target.value)}\n          rows={12}\n          placeholder=\"Type or paste your script here...\"\n          className=\"resize-y\"\n        />\n      </div>\n\n      <p className=\"text-xs text-muted-foreground\">\n        This text will be spoken by your AI model&apos;s voice in the next step.\n        Use the Next button to continue.\n      </p>\n    </div>\n  );\n}\n","const PRICING_480P = 0.03;\nconst PRICING_720P = 0.06;\nconst MIN_CHARGE = 0.15;\nconst MAX_DURATION_SEC = 600;\n\nexport async function getAudioDuration(audioUrl: string): Promise<number | null> {\n  try {\n    const response = await fetch(audioUrl, { method: 'HEAD' });\n    if (!response.ok) {\n      console.error('Failed to fetch audio file');\n      return null;\n    }\n\n    const audio = new Audio(audioUrl);\n    \n    return new Promise((resolve) => {\n      audio.addEventListener('loadedmetadata', () => {\n        const duration = audio.duration;\n        resolve(duration);\n      });\n\n      audio.addEventListener('error', () => {\n        console.error('Failed to load audio metadata');\n        resolve(null);\n      });\n\n      audio.load();\n    });\n  } catch (error) {\n    console.error('Error getting audio duration:', error);\n    return null;\n  }\n}\n\nexport function calculateVideoCost(\n  duration: number,\n  resolution: \"480p\" | \"720p\"\n): { duration: number; cost: number } {\n  const safeDuration = Math.min(duration, MAX_DURATION_SEC);\n  const rate = resolution === \"480p\" ? PRICING_480P : PRICING_720P;\n  const rawCost = safeDuration * rate;\n  const finalCost = Math.max(rawCost, MIN_CHARGE);\n\n  return {\n    duration: safeDuration,\n    cost: parseFloat(finalCost.toFixed(2)),\n  };\n}\n\nexport function formatDuration(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = Math.floor(seconds % 60);\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n}\n\nexport function calculateTTSCost(text: string): number {\n  const characterCount = text.length;\n  const ratePerCharacter = 0.00022;\n  const cost = characterCount * ratePerCharacter;\n  return parseFloat(cost.toFixed(2));\n}","\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AudioPlayer } from \"@/components/tools/audio-player\";\nimport { Loader2, Mic, AlertCircle, CheckCircle2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { calculateTTSCost } from \"@/lib/cost-estimation\";\nimport type { AiModelWithImages } from \"@/types\";\n\ninterface StepVoiceGenProps {\n  script: string;\n  aiModels: AiModelWithImages[];\n  selectedModel: AiModelWithImages | null;\n  onModelChange: (model: AiModelWithImages | null) => void;\n  audioUrl: string | null;\n  onAudioGenerated: (blobUrl: string, signedUrl: string) => void;\n}\n\nexport function StepVoiceGen({\n  script,\n  aiModels,\n  selectedModel,\n  onModelChange,\n  audioUrl,\n  onAudioGenerated,\n}: StepVoiceGenProps) {\n  const [generating, setGenerating] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Filter to models that have a voice_id configured\n  const voiceModels = aiModels.filter((m) => m.voice_id && m.voice_id.trim());\n\n  const estimatedCost = calculateTTSCost(script);\n\n  const handleGenerate = async () => {\n    if (!selectedModel) {\n      toast.error(\"Select an AI model first\");\n      return;\n    }\n\n    if (!script.trim()) {\n      toast.error(\"Script is empty\");\n      return;\n    }\n\n    setGenerating(true);\n    setError(null);\n\n    try {\n      // 1. Generate TTS audio\n      const ttsRes = await fetch(\"/api/tts/generate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          text: script,\n          voice_id: selectedModel.voice_id,\n          settings: selectedModel.voice_settings,\n        }),\n      });\n\n      if (!ttsRes.ok) {\n        const errorData = await ttsRes.json().catch(() => null);\n        setError(\n          errorData?.error || `TTS generation failed (${ttsRes.status})`\n        );\n        return;\n      }\n\n      // 2. Create blob URL for preview\n      const audioBlob = await ttsRes.blob();\n      const blobUrl = URL.createObjectURL(audioBlob);\n\n      // 3. Upload audio to storage (InfiniteTalk needs a public URL)\n      setUploading(true);\n      const formData = new FormData();\n      formData.append(\"file\", audioBlob, \"talking-head-audio.mp3\");\n\n      const uploadRes = await fetch(\"/api/talking-head/upload-audio\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const uploadData = await uploadRes.json();\n\n      if (!uploadRes.ok) {\n        setError(uploadData.error || \"Failed to upload audio\");\n        // Still provide blob URL for preview even if upload fails\n        return;\n      }\n\n      toast.success(\"Voice generated and uploaded\");\n      onAudioGenerated(blobUrl, uploadData.signedUrl);\n    } catch {\n      setError(\"Failed to generate voice. Check your ElevenLabs API key.\");\n    } finally {\n      setGenerating(false);\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <Mic className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Generate Voice</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Select an AI model and generate the voiceover for your script.\n        </p>\n      </div>\n\n      {voiceModels.length === 0 ? (\n        <Alert>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            No AI models with voice configured. Add voice settings (ElevenLabs\n            voice ID) to your models in the{\" \"}\n            <a href=\"/dashboard/models\" className=\"underline font-medium\">\n              AI Models\n            </a>{\" \"}\n            page.\n          </AlertDescription>\n        </Alert>\n      ) : (\n        <>\n          <div className=\"space-y-2\">\n            <Label>AI Model</Label>\n            <Select\n              value={selectedModel?.id || \"\"}\n              onValueChange={(v) => {\n                const model = voiceModels.find((m) => m.id === v) || null;\n                onModelChange(model);\n              }}\n            >\n              <SelectTrigger className=\"w-full\">\n                <SelectValue placeholder=\"Select an AI model...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {voiceModels.map((model) => (\n                  <SelectItem key={model.id} value={model.id}>\n                    <span className=\"flex items-center gap-2\">\n                      {model.reference_images.length > 0 ? (\n                        <img\n                          src={model.reference_images[0].signed_url}\n                          alt=\"\"\n                          className=\"h-5 w-5 rounded-sm object-cover\"\n                        />\n                      ) : (\n                        <Mic className=\"h-3.5 w-3.5 text-muted-foreground\" />\n                      )}\n                      {model.name}\n                    </span>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {selectedModel && (\n            <div className=\"rounded-lg bg-card p-3 space-y-1.5\">\n              <p className=\"text-xs font-medium\">Voice Settings</p>\n              <div className=\"flex gap-3 text-xs text-muted-foreground\">\n                <span>\n                  Stability: {selectedModel.voice_settings.stability}\n                </span>\n                <span>\n                  Similarity:{\" \"}\n                  {selectedModel.voice_settings.similarity_boost}\n                </span>\n                <span>Style: {selectedModel.voice_settings.style}</span>\n              </div>\n            </div>\n          )}\n\n          <div className=\"rounded-lg bg-card p-3\">\n            <p className=\"text-xs font-medium mb-1\">Script Preview</p>\n            <p className=\"text-xs text-muted-foreground line-clamp-3\">\n              {script}\n            </p>\n          </div>\n\n          <div className=\"rounded-lg bg-card p-3 space-y-1\">\n            <p className=\"text-xs font-medium mb-1\">Estimated Cost</p>\n            <div className=\"flex items-center justify-center py-2 bg-muted/50 rounded\">\n              <span className=\"text-sm text-muted-foreground mr-2\">Total:</span>\n              <span className=\"text-2xl font-semibold text-green-600\">\n                ${estimatedCost.toFixed(2)}\n              </span>\n            </div>\n            <p className=\"text-xs text-muted-foreground text-center\">\n              Based on {script.length} characters at ~$0.00022/char\n            </p>\n          </div>\n\n          {error && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          <Button\n            onClick={handleGenerate}\n            disabled={generating || uploading || !selectedModel}\n            className=\"w-full\"\n            size=\"lg\"\n          >\n            {generating ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Generating voice...\n              </>\n            ) : uploading ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Uploading audio...\n              </>\n            ) : (\n              <>\n                <Mic className=\"h-4 w-4 mr-2\" />\n                Generate Voice â€” Est. ${estimatedCost.toFixed(2)}\n              </>\n            )}\n          </Button>\n\n          {audioUrl && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n                <span className=\"text-sm font-medium\">Audio Ready</span>\n              </div>\n              <AudioPlayer audioUrl={audioUrl} />\n              <p className=\"text-xs text-muted-foreground\">\n                Use the Next button to continue to image selection.\n              </p>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Loader2,\n  Search,\n  Check,\n  ImageIcon,\n  Upload,\n  AlertCircle,\n} from \"lucide-react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { cn } from \"@/lib/utils\";\nimport { toast } from \"sonner\";\nimport { getAssetsAction } from \"@/app/dashboard/assets/actions\";\nimport type { AssetWithUrl, AiModelWithImages } from \"@/types\";\n\ninterface StepImageSelectProps {\n  selectedModel: AiModelWithImages | null;\n  selectedImageId: string | null;\n  onImageSelect: (id: string, signedUrl: string) => void;\n}\n\nexport function StepImageSelect({\n  selectedModel,\n  selectedImageId,\n  onImageSelect,\n}: StepImageSelectProps) {\n  const [images, setImages] = useState<AssetWithUrl[]>([]);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [showAll, setShowAll] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const modelImages = selectedModel?.reference_images || [];\n  const hasModelImages = modelImages.length > 0;\n\n  const fetchImages = useCallback(\n    async (append: boolean) => {\n      setLoading(true);\n      const offset = append ? images.length : 0;\n      const result = await getAssetsAction({\n        file_type: \"image\",\n        search: search || undefined,\n        sort_by: \"created_at\",\n        sort_order: \"desc\",\n        limit: 30,\n        offset,\n      });\n\n      if (append) {\n        setImages((prev) => [...prev, ...result.assets]);\n      } else {\n        setImages(result.assets);\n      }\n      setTotal(result.total);\n      setLoading(false);\n    },\n    [search, images.length]\n  );\n\n  useEffect(() => {\n    if (showAll || !hasModelImages) {\n      fetchImages(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showAll, hasModelImages]);\n\n  const handleSearchChange = (value: string) => {\n    setSearch(value);\n    const timeout = setTimeout(() => fetchImages(false), 300);\n    return () => clearTimeout(timeout);\n  };\n\n  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate image type\n    if (!file.type.startsWith(\"image/\")) {\n      toast.error(\"Please select an image file\");\n      return;\n    }\n\n    // Validate size (50MB)\n    if (file.size > 50 * 1024 * 1024) {\n      toast.error(\"File exceeds 50MB size limit\");\n      return;\n    }\n\n    setUploading(true);\n    setUploadError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"tags\", JSON.stringify([\"talking-head\", \"portrait\"]));\n\n      const res = await fetch(\"/api/assets/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setUploadError(data.error || \"Upload failed\");\n        return;\n      }\n\n      toast.success(\"Image uploaded!\");\n\n      // Refresh the image list and auto-select the new image\n      const result = await getAssetsAction({\n        file_type: \"image\",\n        sort_by: \"created_at\",\n        sort_order: \"desc\",\n        limit: 30,\n        offset: 0,\n      });\n\n      setImages(result.assets);\n      setTotal(result.total);\n      setShowAll(true);\n\n      // Find and auto-select the uploaded asset\n      const uploaded = result.assets.find(\n        (a) => a.id === data.asset.id\n      );\n      if (uploaded) {\n        onImageSelect(uploaded.id, uploaded.signed_url);\n      }\n    } catch {\n      setUploadError(\"Failed to upload image\");\n    } finally {\n      setUploading(false);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n    }\n  };\n\n  const displayImages = !showAll && hasModelImages ? modelImages : images;\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <ImageIcon className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Select Portrait Image</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Choose a portrait image for the talking head video. A clear\n          front-facing photo works best.\n        </p>\n      </div>\n\n      {/* Upload + filter row */}\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        {hasModelImages && (\n          <>\n            <Button\n              variant={!showAll ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setShowAll(false)}\n            >\n              {selectedModel?.name}&apos;s Images ({modelImages.length})\n            </Button>\n            <Button\n              variant={showAll ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setShowAll(true)}\n            >\n              All Images\n            </Button>\n          </>\n        )}\n\n        <div className=\"ml-auto\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleUpload}\n            className=\"hidden\"\n          />\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => fileInputRef.current?.click()}\n            disabled={uploading}\n          >\n            {uploading ? (\n              <Loader2 className=\"h-4 w-4 mr-1.5 animate-spin\" />\n            ) : (\n              <Upload className=\"h-4 w-4 mr-1.5\" />\n            )}\n            {uploading ? \"Uploading...\" : \"Upload Image\"}\n          </Button>\n        </div>\n      </div>\n\n      {uploadError && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>{uploadError}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* Search (only for all images) */}\n      {(showAll || !hasModelImages) && (\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search images...\"\n            value={search}\n            onChange={(e) => handleSearchChange(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n      )}\n\n      {/* Image grid */}\n      {displayImages.length === 0 && !loading ? (\n        <div className=\"flex flex-col items-center justify-center py-12 space-y-3\">\n          <p className=\"text-sm text-muted-foreground\">\n            No images found. Upload an image above or add images in the{\" \"}\n            <a href=\"/dashboard/assets\" className=\"underline font-medium\">\n              Asset Library\n            </a>\n            .\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2\">\n          {displayImages.map((image) => {\n            const isSelected = selectedImageId === image.id;\n            return (\n              <button\n                key={image.id}\n                type=\"button\"\n                className={cn(\n                  \"relative aspect-square overflow-hidden rounded-md border-2 transition-all\",\n                  isSelected\n                    ? \"border-accent-blue ring-2 ring-accent-blue/20\"\n                    : \"border-transparent hover:border-muted-foreground/30\"\n                )}\n                onClick={() => onImageSelect(image.id, image.signed_url)}\n              >\n                <img\n                  src={image.signed_url}\n                  alt={image.filename}\n                  className=\"h-full w-full object-cover\"\n                  loading=\"lazy\"\n                />\n                {isSelected && (\n                  <div className=\"absolute inset-0 bg-accent-blue/20 flex items-center justify-center\">\n                    <div className=\"h-6 w-6 rounded-full bg-accent-blue flex items-center justify-center\">\n                      <Check className=\"h-4 w-4 text-primary-foreground\" />\n                    </div>\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Load more (only for all images) */}\n      {(showAll || !hasModelImages) && images.length < total && (\n        <div className=\"flex justify-center\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => fetchImages(true)}\n            disabled={loading}\n          >\n            {loading ? (\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n            ) : (\n              \"Load More\"\n            )}\n          </Button>\n        </div>\n      )}\n\n      {selectedImageId && (\n        <div className=\"flex items-center gap-2 justify-center\">\n          <Badge variant=\"secondary\" className=\"gap-1\">\n            <Check className=\"h-3 w-3\" />\n            Image selected\n          </Badge>\n          <p className=\"text-xs text-muted-foreground\">\n            Use the Next button to continue.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\n// src/switch.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar SWITCH_NAME = \"Switch\";\nvar [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\nvar [SwitchProvider, useSwitchContext] = createSwitchContext(SWITCH_NAME);\nvar Switch = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked ?? false,\n      onChange: onCheckedChange,\n      caller: SWITCH_NAME\n    });\n    return /* @__PURE__ */ jsxs(SwitchProvider, { scope: __scopeSwitch, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"switch\",\n          \"aria-checked\": checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...switchProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        SwitchBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nSwitch.displayName = SWITCH_NAME;\nvar THUMB_NAME = \"SwitchThumb\";\nvar SwitchThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...thumbProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSwitchThumb.displayName = THUMB_NAME;\nvar BUBBLE_INPUT_NAME = \"SwitchBubbleInput\";\nvar SwitchBubbleInput = React.forwardRef(\n  ({\n    __scopeSwitch,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      \"input\",\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nSwitchBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Switch;\nvar Thumb = SwitchThumb;\nexport {\n  Root,\n  Switch,\n  SwitchThumb,\n  Thumb,\n  createSwitchScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport { Switch as SwitchPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Switch({\n  className,\n  size = \"default\",\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root> & {\n  size?: \"sm\" | \"default\"\n}) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      data-size={size}\n      className={cn(\n        \"peer data-[state=checked]:bg-accent-blue data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 group/switch inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-[1.15rem] data-[size=default]:w-8 data-[size=sm]:h-3.5 data-[size=sm]:w-6\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\nclassName={cn(\n        \"bg-background data-[state=unchecked]:bg-foreground data-[state=checked]:bg-accent-blue-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n      )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n","\"use client\";\n\n// src/tooltip.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { useId } from \"@radix-ui/react-id\";\nimport * as PopperPrimitive from \"@radix-ui/react-popper\";\nimport { createPopperScope } from \"@radix-ui/react-popper\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { createSlottable } from \"@radix-ui/react-slot\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport * as VisuallyHiddenPrimitive from \"@radix-ui/react-visually-hidden\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar [createTooltipContext, createTooltipScope] = createContextScope(\"Tooltip\", [\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar PROVIDER_NAME = \"TooltipProvider\";\nvar DEFAULT_DELAY_DURATION = 700;\nvar TOOLTIP_OPEN = \"tooltip.open\";\nvar [TooltipProviderContextProvider, useTooltipProviderContext] = createTooltipContext(PROVIDER_NAME);\nvar TooltipProvider = (props) => {\n  const {\n    __scopeTooltip,\n    delayDuration = DEFAULT_DELAY_DURATION,\n    skipDelayDuration = 300,\n    disableHoverableContent = false,\n    children\n  } = props;\n  const isOpenDelayedRef = React.useRef(true);\n  const isPointerInTransitRef = React.useRef(false);\n  const skipDelayTimerRef = React.useRef(0);\n  React.useEffect(() => {\n    const skipDelayTimer = skipDelayTimerRef.current;\n    return () => window.clearTimeout(skipDelayTimer);\n  }, []);\n  return /* @__PURE__ */ jsx(\n    TooltipProviderContextProvider,\n    {\n      scope: __scopeTooltip,\n      isOpenDelayedRef,\n      delayDuration,\n      onOpen: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        isOpenDelayedRef.current = false;\n      }, []),\n      onClose: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        skipDelayTimerRef.current = window.setTimeout(\n          () => isOpenDelayedRef.current = true,\n          skipDelayDuration\n        );\n      }, [skipDelayDuration]),\n      isPointerInTransitRef,\n      onPointerInTransitChange: React.useCallback((inTransit) => {\n        isPointerInTransitRef.current = inTransit;\n      }, []),\n      disableHoverableContent,\n      children\n    }\n  );\n};\nTooltipProvider.displayName = PROVIDER_NAME;\nvar TOOLTIP_NAME = \"Tooltip\";\nvar [TooltipContextProvider, useTooltipContext] = createTooltipContext(TOOLTIP_NAME);\nvar Tooltip = (props) => {\n  const {\n    __scopeTooltip,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    disableHoverableContent: disableHoverableContentProp,\n    delayDuration: delayDurationProp\n  } = props;\n  const providerContext = useTooltipProviderContext(TOOLTIP_NAME, props.__scopeTooltip);\n  const popperScope = usePopperScope(__scopeTooltip);\n  const [trigger, setTrigger] = React.useState(null);\n  const contentId = useId();\n  const openTimerRef = React.useRef(0);\n  const disableHoverableContent = disableHoverableContentProp ?? providerContext.disableHoverableContent;\n  const delayDuration = delayDurationProp ?? providerContext.delayDuration;\n  const wasOpenDelayedRef = React.useRef(false);\n  const [open, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen ?? false,\n    onChange: (open2) => {\n      if (open2) {\n        providerContext.onOpen();\n        document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN));\n      } else {\n        providerContext.onClose();\n      }\n      onOpenChange?.(open2);\n    },\n    caller: TOOLTIP_NAME\n  });\n  const stateAttribute = React.useMemo(() => {\n    return open ? wasOpenDelayedRef.current ? \"delayed-open\" : \"instant-open\" : \"closed\";\n  }, [open]);\n  const handleOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    wasOpenDelayedRef.current = false;\n    setOpen(true);\n  }, [setOpen]);\n  const handleClose = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    setOpen(false);\n  }, [setOpen]);\n  const handleDelayedOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = window.setTimeout(() => {\n      wasOpenDelayedRef.current = true;\n      setOpen(true);\n      openTimerRef.current = 0;\n    }, delayDuration);\n  }, [delayDuration, setOpen]);\n  React.useEffect(() => {\n    return () => {\n      if (openTimerRef.current) {\n        window.clearTimeout(openTimerRef.current);\n        openTimerRef.current = 0;\n      }\n    };\n  }, []);\n  return /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children: /* @__PURE__ */ jsx(\n    TooltipContextProvider,\n    {\n      scope: __scopeTooltip,\n      contentId,\n      open,\n      stateAttribute,\n      trigger,\n      onTriggerChange: setTrigger,\n      onTriggerEnter: React.useCallback(() => {\n        if (providerContext.isOpenDelayedRef.current) handleDelayedOpen();\n        else handleOpen();\n      }, [providerContext.isOpenDelayedRef, handleDelayedOpen, handleOpen]),\n      onTriggerLeave: React.useCallback(() => {\n        if (disableHoverableContent) {\n          handleClose();\n        } else {\n          window.clearTimeout(openTimerRef.current);\n          openTimerRef.current = 0;\n        }\n      }, [handleClose, disableHoverableContent]),\n      onOpen: handleOpen,\n      onClose: handleClose,\n      disableHoverableContent,\n      children\n    }\n  ) });\n};\nTooltip.displayName = TOOLTIP_NAME;\nvar TRIGGER_NAME = \"TooltipTrigger\";\nvar TooltipTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...triggerProps } = props;\n    const context = useTooltipContext(TRIGGER_NAME, __scopeTooltip);\n    const providerContext = useTooltipProviderContext(TRIGGER_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onTriggerChange);\n    const isPointerDownRef = React.useRef(false);\n    const hasPointerMoveOpenedRef = React.useRef(false);\n    const handlePointerUp = React.useCallback(() => isPointerDownRef.current = false, []);\n    React.useEffect(() => {\n      return () => document.removeEventListener(\"pointerup\", handlePointerUp);\n    }, [handlePointerUp]);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        \"aria-describedby\": context.open ? context.contentId : void 0,\n        \"data-state\": context.stateAttribute,\n        ...triggerProps,\n        ref: composedRefs,\n        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n          if (event.pointerType === \"touch\") return;\n          if (!hasPointerMoveOpenedRef.current && !providerContext.isPointerInTransitRef.current) {\n            context.onTriggerEnter();\n            hasPointerMoveOpenedRef.current = true;\n          }\n        }),\n        onPointerLeave: composeEventHandlers(props.onPointerLeave, () => {\n          context.onTriggerLeave();\n          hasPointerMoveOpenedRef.current = false;\n        }),\n        onPointerDown: composeEventHandlers(props.onPointerDown, () => {\n          if (context.open) {\n            context.onClose();\n          }\n          isPointerDownRef.current = true;\n          document.addEventListener(\"pointerup\", handlePointerUp, { once: true });\n        }),\n        onFocus: composeEventHandlers(props.onFocus, () => {\n          if (!isPointerDownRef.current) context.onOpen();\n        }),\n        onBlur: composeEventHandlers(props.onBlur, context.onClose),\n        onClick: composeEventHandlers(props.onClick, context.onClose)\n      }\n    ) });\n  }\n);\nTooltipTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"TooltipPortal\";\nvar [PortalProvider, usePortalContext] = createTooltipContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar TooltipPortal = (props) => {\n  const { __scopeTooltip, forceMount, children, container } = props;\n  const context = useTooltipContext(PORTAL_NAME, __scopeTooltip);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeTooltip, forceMount, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children }) }) });\n};\nTooltipPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"TooltipContent\";\nvar TooltipContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeTooltip);\n    const { forceMount = portalContext.forceMount, side = \"top\", ...contentProps } = props;\n    const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: context.disableHoverableContent ? /* @__PURE__ */ jsx(TooltipContentImpl, { side, ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsx(TooltipContentHoverable, { side, ...contentProps, ref: forwardedRef }) });\n  }\n);\nvar TooltipContentHoverable = React.forwardRef((props, forwardedRef) => {\n  const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n  const providerContext = useTooltipProviderContext(CONTENT_NAME, props.__scopeTooltip);\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const [pointerGraceArea, setPointerGraceArea] = React.useState(null);\n  const { trigger, onClose } = context;\n  const content = ref.current;\n  const { onPointerInTransitChange } = providerContext;\n  const handleRemoveGraceArea = React.useCallback(() => {\n    setPointerGraceArea(null);\n    onPointerInTransitChange(false);\n  }, [onPointerInTransitChange]);\n  const handleCreateGraceArea = React.useCallback(\n    (event, hoverTarget) => {\n      const currentTarget = event.currentTarget;\n      const exitPoint = { x: event.clientX, y: event.clientY };\n      const exitSide = getExitSideFromRect(exitPoint, currentTarget.getBoundingClientRect());\n      const paddedExitPoints = getPaddedExitPoints(exitPoint, exitSide);\n      const hoverTargetPoints = getPointsFromRect(hoverTarget.getBoundingClientRect());\n      const graceArea = getHull([...paddedExitPoints, ...hoverTargetPoints]);\n      setPointerGraceArea(graceArea);\n      onPointerInTransitChange(true);\n    },\n    [onPointerInTransitChange]\n  );\n  React.useEffect(() => {\n    return () => handleRemoveGraceArea();\n  }, [handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (trigger && content) {\n      const handleTriggerLeave = (event) => handleCreateGraceArea(event, content);\n      const handleContentLeave = (event) => handleCreateGraceArea(event, trigger);\n      trigger.addEventListener(\"pointerleave\", handleTriggerLeave);\n      content.addEventListener(\"pointerleave\", handleContentLeave);\n      return () => {\n        trigger.removeEventListener(\"pointerleave\", handleTriggerLeave);\n        content.removeEventListener(\"pointerleave\", handleContentLeave);\n      };\n    }\n  }, [trigger, content, handleCreateGraceArea, handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (pointerGraceArea) {\n      const handleTrackPointerGrace = (event) => {\n        const target = event.target;\n        const pointerPosition = { x: event.clientX, y: event.clientY };\n        const hasEnteredTarget = trigger?.contains(target) || content?.contains(target);\n        const isPointerOutsideGraceArea = !isPointInPolygon(pointerPosition, pointerGraceArea);\n        if (hasEnteredTarget) {\n          handleRemoveGraceArea();\n        } else if (isPointerOutsideGraceArea) {\n          handleRemoveGraceArea();\n          onClose();\n        }\n      };\n      document.addEventListener(\"pointermove\", handleTrackPointerGrace);\n      return () => document.removeEventListener(\"pointermove\", handleTrackPointerGrace);\n    }\n  }, [trigger, content, pointerGraceArea, onClose, handleRemoveGraceArea]);\n  return /* @__PURE__ */ jsx(TooltipContentImpl, { ...props, ref: composedRefs });\n});\nvar [VisuallyHiddenContentContextProvider, useVisuallyHiddenContentContext] = createTooltipContext(TOOLTIP_NAME, { isInside: false });\nvar Slottable = createSlottable(\"TooltipContent\");\nvar TooltipContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTooltip,\n      children,\n      \"aria-label\": ariaLabel,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      ...contentProps\n    } = props;\n    const context = useTooltipContext(CONTENT_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const { onClose } = context;\n    React.useEffect(() => {\n      document.addEventListener(TOOLTIP_OPEN, onClose);\n      return () => document.removeEventListener(TOOLTIP_OPEN, onClose);\n    }, [onClose]);\n    React.useEffect(() => {\n      if (context.trigger) {\n        const handleScroll = (event) => {\n          const target = event.target;\n          if (target?.contains(context.trigger)) onClose();\n        };\n        window.addEventListener(\"scroll\", handleScroll, { capture: true });\n        return () => window.removeEventListener(\"scroll\", handleScroll, { capture: true });\n      }\n    }, [context.trigger, onClose]);\n    return /* @__PURE__ */ jsx(\n      DismissableLayer,\n      {\n        asChild: true,\n        disableOutsidePointerEvents: false,\n        onEscapeKeyDown,\n        onPointerDownOutside,\n        onFocusOutside: (event) => event.preventDefault(),\n        onDismiss: onClose,\n        children: /* @__PURE__ */ jsxs(\n          PopperPrimitive.Content,\n          {\n            \"data-state\": context.stateAttribute,\n            ...popperScope,\n            ...contentProps,\n            ref: forwardedRef,\n            style: {\n              ...contentProps.style,\n              // re-namespace exposed content custom properties\n              ...{\n                \"--radix-tooltip-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n                \"--radix-tooltip-content-available-width\": \"var(--radix-popper-available-width)\",\n                \"--radix-tooltip-content-available-height\": \"var(--radix-popper-available-height)\",\n                \"--radix-tooltip-trigger-width\": \"var(--radix-popper-anchor-width)\",\n                \"--radix-tooltip-trigger-height\": \"var(--radix-popper-anchor-height)\"\n              }\n            },\n            children: [\n              /* @__PURE__ */ jsx(Slottable, { children }),\n              /* @__PURE__ */ jsx(VisuallyHiddenContentContextProvider, { scope: __scopeTooltip, isInside: true, children: /* @__PURE__ */ jsx(VisuallyHiddenPrimitive.Root, { id: context.contentId, role: \"tooltip\", children: ariaLabel || children }) })\n            ]\n          }\n        )\n      }\n    );\n  }\n);\nTooltipContent.displayName = CONTENT_NAME;\nvar ARROW_NAME = \"TooltipArrow\";\nvar TooltipArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeTooltip);\n    const visuallyHiddenContentContext = useVisuallyHiddenContentContext(\n      ARROW_NAME,\n      __scopeTooltip\n    );\n    return visuallyHiddenContentContext.isInside ? null : /* @__PURE__ */ jsx(PopperPrimitive.Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nTooltipArrow.displayName = ARROW_NAME;\nfunction getExitSideFromRect(point, rect) {\n  const top = Math.abs(rect.top - point.y);\n  const bottom = Math.abs(rect.bottom - point.y);\n  const right = Math.abs(rect.right - point.x);\n  const left = Math.abs(rect.left - point.x);\n  switch (Math.min(top, bottom, right, left)) {\n    case left:\n      return \"left\";\n    case right:\n      return \"right\";\n    case top:\n      return \"top\";\n    case bottom:\n      return \"bottom\";\n    default:\n      throw new Error(\"unreachable\");\n  }\n}\nfunction getPaddedExitPoints(exitPoint, exitSide, padding = 5) {\n  const paddedExitPoints = [];\n  switch (exitSide) {\n    case \"top\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y + padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"bottom\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y - padding }\n      );\n      break;\n    case \"left\":\n      paddedExitPoints.push(\n        { x: exitPoint.x + padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"right\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x - padding, y: exitPoint.y + padding }\n      );\n      break;\n  }\n  return paddedExitPoints;\n}\nfunction getPointsFromRect(rect) {\n  const { top, right, bottom, left } = rect;\n  return [\n    { x: left, y: top },\n    { x: right, y: top },\n    { x: right, y: bottom },\n    { x: left, y: bottom }\n  ];\n}\nfunction isPointInPolygon(point, polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const ii = polygon[i];\n    const jj = polygon[j];\n    const xi = ii.x;\n    const yi = ii.y;\n    const xj = jj.x;\n    const yj = jj.y;\n    const intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\nfunction getHull(points) {\n  const newPoints = points.slice();\n  newPoints.sort((a, b) => {\n    if (a.x < b.x) return -1;\n    else if (a.x > b.x) return 1;\n    else if (a.y < b.y) return -1;\n    else if (a.y > b.y) return 1;\n    else return 0;\n  });\n  return getHullPresorted(newPoints);\n}\nfunction getHullPresorted(points) {\n  if (points.length <= 1) return points.slice();\n  const upperHull = [];\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    while (upperHull.length >= 2) {\n      const q = upperHull[upperHull.length - 1];\n      const r = upperHull[upperHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) upperHull.pop();\n      else break;\n    }\n    upperHull.push(p);\n  }\n  upperHull.pop();\n  const lowerHull = [];\n  for (let i = points.length - 1; i >= 0; i--) {\n    const p = points[i];\n    while (lowerHull.length >= 2) {\n      const q = lowerHull[lowerHull.length - 1];\n      const r = lowerHull[lowerHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) lowerHull.pop();\n      else break;\n    }\n    lowerHull.push(p);\n  }\n  lowerHull.pop();\n  if (upperHull.length === 1 && lowerHull.length === 1 && upperHull[0].x === lowerHull[0].x && upperHull[0].y === lowerHull[0].y) {\n    return upperHull;\n  } else {\n    return upperHull.concat(lowerHull);\n  }\n}\nvar Provider = TooltipProvider;\nvar Root3 = Tooltip;\nvar Trigger = TooltipTrigger;\nvar Portal = TooltipPortal;\nvar Content2 = TooltipContent;\nvar Arrow2 = TooltipArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  Portal,\n  Provider,\n  Root3 as Root,\n  Tooltip,\n  TooltipArrow,\n  TooltipContent,\n  TooltipPortal,\n  TooltipProvider,\n  TooltipTrigger,\n  Trigger,\n  createTooltipScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport { Tooltip as TooltipPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  )\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  )\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","/* __next_internal_action_entry_do_not_use__ [{\"00fa4820aecc0a3e59611bf0b7744355af8d4e27c0\":\"getCaptionPresetsAction\"},\"src/app/dashboard/tools/talking-head/caption-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"00fa4820aecc0a3e59611bf0b7744355af8d4e27c0\",callServer,void 0,findSourceMapURL,\"getCaptionPresetsAction\");export{$$RSC_SERVER_ACTION_0 as getCaptionPresetsAction};","\"use client\";\n\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { TalkingHeadWizard } from \"./talking-head-wizard\";\nimport { BulkTalkingHead } from \"./bulk-talking-head\";\nimport { Video, Layers } from \"lucide-react\";\nimport type { AiModelWithImages } from \"@/types\";\n\ninterface TalkingHeadTabsProps {\n  aiModels: AiModelWithImages[];\n  prefillVideoUrl?: string;\n}\n\nexport function TalkingHeadTabs({ aiModels, prefillVideoUrl }: TalkingHeadTabsProps) {\n  return (\n    <Tabs defaultValue=\"single\" className=\"space-y-4\">\n      <TabsList>\n        <TabsTrigger value=\"single\" className=\"gap-1.5\">\n          <Video className=\"h-3.5 w-3.5\" />\n          Single Video\n        </TabsTrigger>\n        <TabsTrigger value=\"bulk\" className=\"gap-1.5\">\n          <Layers className=\"h-3.5 w-3.5\" />\n          Bulk Generate\n        </TabsTrigger>\n      </TabsList>\n\n      <TabsContent value=\"single\">\n        <TalkingHeadWizard aiModels={aiModels} prefillVideoUrl={prefillVideoUrl} />\n      </TabsContent>\n\n      <TabsContent value=\"bulk\">\n        <BulkTalkingHead aiModels={aiModels} />\n      </TabsContent>\n    </Tabs>\n  );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"60f71fc9dc241bb13bca925648e5296866a1ae1431\":\"saveCaptionPresetAction\"},\"src/app/dashboard/tools/talking-head/caption-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"60f71fc9dc241bb13bca925648e5296866a1ae1431\",callServer,void 0,findSourceMapURL,\"saveCaptionPresetAction\");export{$$RSC_SERVER_ACTION_1 as saveCaptionPresetAction};","/* __next_internal_action_entry_do_not_use__ [{\"40d147172e8c74ea711433ab0c509a91c9d71086bc\":\"deleteCaptionPresetAction\"},\"src/app/dashboard/tools/talking-head/caption-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"40d147172e8c74ea711433ab0c509a91c9d71086bc\",callServer,void 0,findSourceMapURL,\"deleteCaptionPresetAction\");export{$$RSC_SERVER_ACTION_2 as deleteCaptionPresetAction};","\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Loader2, Link2, AlertCircle } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\ninterface StepVideoUrlProps {\n  videoUrl: string;\n  onVideoUrlChange: (url: string) => void;\n  onTranscriptReady: (transcript: string) => void;\n}\n\nexport function StepVideoUrl({\n  videoUrl,\n  onVideoUrlChange,\n  onTranscriptReady,\n}: StepVideoUrlProps) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleTranscribe = async () => {\n    if (!videoUrl.trim()) {\n      toast.error(\"Please enter a video URL\");\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(\"/api/transcribe\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ urls: [videoUrl.trim()] }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Transcription failed\");\n        return;\n      }\n\n      if (!data.results || data.results.length === 0) {\n        setError(\"No transcription results returned\");\n        return;\n      }\n\n      const result = data.results[0];\n\n      if (result.error) {\n        setError(result.error);\n        return;\n      }\n\n      if (!result.transcript || result.transcript.trim().length === 0) {\n        setError(\"No speech detected in the video\");\n        return;\n      }\n\n      toast.success(\n        `Transcribed ${result.word_count} words from ${result.platform}`\n      );\n      onTranscriptReady(result.transcript);\n    } catch {\n      setError(\"Failed to transcribe video. Check your WaveSpeed API key.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <Link2 className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Enter Video URL</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Paste a video URL to transcribe. Supports Instagram, TikTok, YouTube,\n          and X.\n        </p>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"video-url\">Video URL</Label>\n        <Input\n          id=\"video-url\"\n          placeholder=\"https://www.instagram.com/reel/...\"\n          value={videoUrl}\n          onChange={(e) => onVideoUrlChange(e.target.value)}\n          disabled={loading}\n        />\n      </div>\n\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      <Button\n        onClick={handleTranscribe}\n        disabled={loading || !videoUrl.trim()}\n        className=\"w-full\"\n        size=\"lg\"\n      >\n        {loading ? (\n          <>\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n            Transcribing...\n          </>\n        ) : (\n          \"Transcribe Video\"\n        )}\n      </Button>\n\n      <p className=\"text-xs text-muted-foreground text-center\">\n        Powered by WaveSpeed AI Whisper. You can also skip this step and type\n        your script manually.\n      </p>\n\n      <Button\n        variant=\"link\"\n        className=\"w-full text-xs\"\n        onClick={() => onTranscriptReady(\"\")}\n      >\n        Skip â€” write script manually\n      </Button>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Plus,\n  Trash2,\n  Loader2,\n  Video,\n  AlertCircle,\n  CheckCircle2,\n  Upload,\n  Search,\n  ImageIcon,\n  Download,\n  Save,\n  Mic,\n  X,\n  Subtitles,\n  RefreshCw,\n  Info,\n} from \"lucide-react\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { CaptionCustomizerInline } from \"./caption-customizer\";\nimport { DEFAULT_CAPTION_SETTINGS } from \"@/lib/caption-styles\";\nimport type { CustomCaptionSettings } from \"@/lib/caption-styles\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport type { WordTimestamp } from \"@/types\";\nimport { cn } from \"@/lib/utils\";\nimport { toast } from \"sonner\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { getAssetsAction } from \"@/app/dashboard/assets/actions\";\nimport type { AiModelWithImages, AssetWithUrl } from \"@/types\";\n\ninterface BulkTalkingHeadProps {\n  aiModels: AiModelWithImages[];\n}\n\ninterface BulkJob {\n  id: string;\n  script: string;\n  imageId: string | null;\n  imageUrl: string | null;\n  status: \"pending\" | \"generating_voice\" | \"uploading_audio\" | \"submitting\" | \"polling\" | \"captioning\" | \"completed\" | \"failed\";\n  error?: string;\n  audioUrl?: string;\n  audioSignedUrl?: string;\n  taskId?: string;\n  videoUrl?: string;\n  captionedVideoUrl?: string;\n  videoAssetId?: string;\n  pollCount?: number;\n  words?: WordTimestamp[];\n}\n\nconst POLL_INTERVAL_MS = 5000;\nconst MAX_POLL_ATTEMPTS = 200;\n\n// Step section component for visual stepping through the workflow\nfunction StepSection({\n  step,\n  title,\n  description,\n  children,\n}: {\n  step: number;\n  title: string;\n  description: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <div className=\"rounded-lg border border-border bg-card p-5 space-y-4\">\n      <div className=\"flex items-start gap-3\">\n        <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-semibold\">\n          {step}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <h3 className=\"text-base font-semibold\">{title}</h3>\n            <Info className=\"h-4 w-4 text-muted-foreground\" />\n          </div>\n          <p className=\"text-sm text-muted-foreground mt-0.5\">{description}</p>\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n}\n\nexport function BulkTalkingHead({ aiModels }: BulkTalkingHeadProps) {\n  const voiceModels = aiModels.filter((m) => m.voice_id && m.voice_id.trim());\n  const [selectedModelId, setSelectedModelId] = useState<string>(\"\");\n  const [resolution, setResolution] = useState(\"480p\");\n  const [captionsEnabled, setCaptionsEnabled] = useState(false);\n  const [captionSettings, setCaptionSettings] = useState<CustomCaptionSettings>({ ...DEFAULT_CAPTION_SETTINGS });\n  const [jobs, setJobs] = useState<BulkJob[]>([{ id: crypto.randomUUID(), script: \"\", imageId: null, imageUrl: null, status: \"pending\" }]);\n  const [running, setRunning] = useState(false);\n  const pollingRefs = useRef<Map<string, boolean>>(new Map());\n  const [pickerJobId, setPickerJobId] = useState<string | null>(null);\n  const [pickerImages, setPickerImages] = useState<AssetWithUrl[]>([]);\n  const [pickerTotal, setPickerTotal] = useState(0);\n  const [pickerLoading, setPickerLoading] = useState(false);\n  const [pickerSearch, setPickerSearch] = useState(\"\");\n  const [uploading, setUploading] = useState(false);\n  const [dragOverJobId, setDragOverJobId] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [bulkImagePool, setBulkImagePool] = useState<Array<{ id: string; url: string }>>([]);\n  const [bulkUploading, setBulkUploading] = useState(false);\n  const [bulkDragOver, setBulkDragOver] = useState(false);\n  const bulkFileInputRef = useRef<HTMLInputElement>(null);\n\n  // Re-caption dialog state\n  const [recaptionJobId, setRecaptionJobId] = useState<string | null>(null);\n  const [recaptionSettings, setRecaptionSettings] = useState<CustomCaptionSettings>({ ...DEFAULT_CAPTION_SETTINGS });\n  const [recaptioning, setRecaptioning] = useState(false);\n\n  const selectedModel = voiceModels.find((m) => m.id === selectedModelId) || null;\n\n  useEffect(() => {\n    return () => {\n      pollingRefs.current.forEach((_, key) => pollingRefs.current.set(key, false));\n    };\n  }, []);\n\n  const addJob = () => {\n    setJobs((prev) => [...prev, { id: crypto.randomUUID(), script: \"\", imageId: null, imageUrl: null, status: \"pending\" }]);\n  };\n\n  const removeJob = (id: string) => {\n    if (jobs.length <= 1) return;\n    pollingRefs.current.set(id, false);\n    setJobs((prev) => prev.filter((j) => j.id !== id));\n  };\n\n  const updateJob = (id: string, updates: Partial<BulkJob>) => {\n    setJobs((prev) => prev.map((j) => (j.id === id ? { ...j, ...updates } : j)));\n  };\n\n  const fetchPickerImages = useCallback(async (append: boolean) => {\n    setPickerLoading(true);\n    const offset = append ? pickerImages.length : 0;\n    const result = await getAssetsAction({\n      file_type: \"image\",\n      search: pickerSearch || undefined,\n      sort_by: \"created_at\",\n      sort_order: \"desc\",\n      limit: 30,\n      offset,\n    });\n    if (append) {\n      setPickerImages((prev) => [...prev, ...result.assets]);\n    } else {\n      setPickerImages(result.assets);\n    }\n    setPickerTotal(result.total);\n    setPickerLoading(false);\n  }, [pickerSearch, pickerImages.length]);\n\n  useEffect(() => {\n    if (pickerJobId) {\n      setPickerSearch(\"\");\n      fetchPickerImages(false);\n    }\n  }, [pickerJobId]);\n\n  const handlePickerSearch = (value: string) => {\n    setPickerSearch(value);\n    const t = setTimeout(() => fetchPickerImages(false), 300);\n    return () => clearTimeout(t);\n  };\n\n  const handlePickerSelect = (image: AssetWithUrl) => {\n    if (pickerJobId) {\n      updateJob(pickerJobId, { imageId: image.id, imageUrl: image.signed_url });\n      setPickerJobId(null);\n    }\n  };\n\n  /**\n   * Upload a single image directly to Supabase Storage from the browser.\n   * Bypasses the API route to avoid Vercel's 4.5MB body limit.\n   */\n  const handleImageUpload = async (file: File, targetJobId?: string) => {\n    if (!file || !file.type.startsWith(\"image/\")) return null;\n    if (file.size > 50 * 1024 * 1024) {\n      toast.error(\"File exceeds 50MB size limit\");\n      return null;\n    }\n\n    setUploading(true);\n    try {\n      const supabase = createClient();\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        toast.error(\"Not authenticated\");\n        return null;\n      }\n\n      // Upload directly to Supabase Storage\n      const uuid = crypto.randomUUID();\n      const safeName = file.name.replace(/[^a-zA-Z0-9._-]/g, \"_\");\n      const filePath = `${user.id}/image/${uuid}_${safeName}`;\n\n      const { error: uploadError } = await supabase.storage\n        .from(\"assets\")\n        .upload(filePath, file, { contentType: file.type, upsert: false });\n\n      if (uploadError) {\n        toast.error(`Upload failed: ${uploadError.message}`);\n        return null;\n      }\n\n      // Create asset record in DB\n      const { data: asset, error: dbError } = await supabase\n        .from(\"assets\")\n        .insert({\n          user_id: user.id,\n          filename: file.name,\n          file_path: filePath,\n          file_type: \"image\",\n          mime_type: file.type,\n          file_size: file.size,\n          tags: [\"talking-head\", \"portrait\"],\n          metadata: {},\n        })\n        .select(\"id\")\n        .single();\n\n      if (dbError) {\n        await supabase.storage.from(\"assets\").remove([filePath]);\n        toast.error(`Database error: ${dbError.message}`);\n        return null;\n      }\n\n      // Get signed URL\n      const { data: urlData } = await supabase.storage\n        .from(\"assets\")\n        .createSignedUrl(filePath, 3600);\n\n      const uploaded = { id: asset.id, url: urlData?.signedUrl || \"\" };\n      const jobIdToUpdate = targetJobId || pickerJobId;\n      if (jobIdToUpdate) {\n        updateJob(jobIdToUpdate, { imageId: uploaded.id, imageUrl: uploaded.url });\n        if (!targetJobId) setPickerJobId(null);\n      }\n\n      return uploaded;\n    } catch {\n      toast.error(\"Failed to upload image\");\n      return null;\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  };\n\n  const handlePickerUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) await handleImageUpload(file);\n  };\n\n  const handleDragOver = (e: React.DragEvent, jobId: string) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!running) setDragOverJobId(jobId);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverJobId(null);\n  };\n\n  const handleDrop = async (e: React.DragEvent, jobId: string) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragOverJobId(null);\n\n    if (running) return;\n\n    const files = e.dataTransfer.files;\n    if (!files || files.length === 0) return;\n    const file = files[0];\n\n    if (!file.type.startsWith('image/')) {\n      toast.error('Only image files are supported');\n      return;\n    }\n\n    await handleImageUpload(file, jobId);\n  };\n\n  /**\n   * Upload multiple images directly to Supabase Storage from the browser.\n   * Uses concurrency limit of 3 and bypasses the API route body size limit.\n   */\n  const uploadBulkImages = async (files: File[] | FileList) => {\n    setBulkUploading(true);\n\n    const supabase = createClient();\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) {\n      toast.error(\"Not authenticated\");\n      setBulkUploading(false);\n      return;\n    }\n\n    // Validate and collect eligible files\n    const validFiles: File[] = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      if (!file.type.startsWith(\"image/\")) continue;\n      if (file.size > 50 * 1024 * 1024) {\n        toast.error(`File \"${file.name}\" exceeds 50MB limit`);\n        continue;\n      }\n      validFiles.push(file);\n    }\n\n    if (validFiles.length === 0) {\n      setBulkUploading(false);\n      return;\n    }\n\n    // Upload with concurrency limit of 3\n    const CONCURRENCY = 3;\n    const uploadedImages: Array<{ id: string; url: string }> = [];\n    let failedCount = 0;\n\n    for (let i = 0; i < validFiles.length; i += CONCURRENCY) {\n      const batch = validFiles.slice(i, i + CONCURRENCY);\n      const batchResults = await Promise.all(\n        batch.map(async (file) => {\n          try {\n            const uuid = crypto.randomUUID();\n            const safeName = file.name.replace(/[^a-zA-Z0-9._-]/g, \"_\");\n            const filePath = `${user.id}/image/${uuid}_${safeName}`;\n\n            const { error: uploadError } = await supabase.storage\n              .from(\"assets\")\n              .upload(filePath, file, { contentType: file.type, upsert: false });\n\n            if (uploadError) return null;\n\n            const { data: asset, error: dbError } = await supabase\n              .from(\"assets\")\n              .insert({\n                user_id: user.id,\n                filename: file.name,\n                file_path: filePath,\n                file_type: \"image\",\n                mime_type: file.type,\n                file_size: file.size,\n                tags: [\"talking-head\", \"portrait\"],\n                metadata: {},\n              })\n              .select(\"id\")\n              .single();\n\n            if (dbError) {\n              await supabase.storage.from(\"assets\").remove([filePath]);\n              return null;\n            }\n\n            const { data: urlData } = await supabase.storage\n              .from(\"assets\")\n              .createSignedUrl(filePath, 3600);\n\n            if (!urlData?.signedUrl) return null;\n            return { id: asset.id, url: urlData.signedUrl };\n          } catch {\n            return null;\n          }\n        })\n      );\n\n      for (const result of batchResults) {\n        if (result) {\n          uploadedImages.push(result);\n        } else {\n          failedCount++;\n        }\n      }\n    }\n\n    if (uploadedImages.length > 0) {\n      setBulkImagePool((prev) => [...prev, ...uploadedImages]);\n      toast.success(`${uploadedImages.length} image${uploadedImages.length === 1 ? '' : 's'} uploaded to pool`);\n      if (failedCount > 0) {\n        toast.error(`${failedCount} image${failedCount === 1 ? '' : 's'} failed to upload`);\n      }\n    } else {\n      toast.error(\"Failed to upload images\");\n    }\n\n    setBulkUploading(false);\n  };\n\n  const handleBulkFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      await uploadBulkImages(files);\n    }\n    if (bulkFileInputRef.current) bulkFileInputRef.current.value = \"\";\n  };\n\n  const handleBulkDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!running) setBulkDragOver(true);\n  };\n\n  const handleBulkDragLeave = () => {\n    setBulkDragOver(false);\n  };\n\n  const handleBulkDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setBulkDragOver(false);\n\n    if (running) return;\n\n    const files = e.dataTransfer.files;\n    if (!files || files.length === 0) return;\n\n    const imageFiles = Array.from(files).filter(f => f.type.startsWith(\"image/\"));\n    if (imageFiles.length === 0) {\n      toast.error(\"Only image files are supported\");\n      return;\n    }\n\n    await uploadBulkImages(imageFiles);\n  };\n\n  const removeBulkImage = (id: string) => {\n    setBulkImagePool((prev) => prev.filter(img => img.id !== id));\n  };\n\n  const clearBulkPool = () => {\n    setBulkImagePool([]);\n  };\n\n  const assignPoolImages = () => {\n    const emptyJobs = jobs.filter(j => j.status === \"pending\" && j.script.trim() && !j.imageId && !j.imageUrl);\n    if (emptyJobs.length === 0 || bulkImagePool.length === 0) return { assignedCount: 0, assignedJobIds: [] };\n\n    const available = [...bulkImagePool].sort(() => Math.random() - 0.5);\n    const assignCount = Math.min(emptyJobs.length, available.length);\n\n    const updatedJobs: Array<{ id: string; imageId: string; imageUrl: string }> = [];\n    const assignedJobIds: string[] = [];\n    for (let i = 0; i < assignCount; i++) {\n      const jobId = emptyJobs[i].id;\n      updatedJobs.push({ id: jobId, imageId: available[i].id, imageUrl: available[i].url });\n      assignedJobIds.push(jobId);\n    }\n    setJobs(prev => prev.map(j => {\n      const update = updatedJobs.find(u => u.id === j.id);\n      return update ? { ...j, imageId: update.imageId, imageUrl: update.imageUrl } : j;\n    }));\n\n    return { assignedCount: assignCount, assignedJobIds };\n  };\n\n  const addCaptionsToJob = useCallback(async (jobId: string, videoUrl: string, audioUrl: string, customSettingsOverride?: CustomCaptionSettings) => {\n    updateJob(jobId, { status: \"captioning\" });\n    try {\n      // Step 1: Transcribe audio to get word timestamps\n      const transcribeRes = await fetch(\"/api/talking-head/transcribe-audio\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ audioUrl }),\n      });\n      const transcribeData = await transcribeRes.json();\n\n      if (!transcribeRes.ok || !transcribeData.words?.length) {\n        const reason = transcribeData.error || \"No word timestamps returned\";\n        console.error(\"Caption transcription failed:\", reason);\n        toast.warning(`Captions skipped: transcription failed â€” ${reason}`);\n        updateJob(jobId, { status: \"completed\", videoUrl });\n        return;\n      }\n\n      // Step 2: Burn captions into video via FFmpeg\n      const captionRes = await fetch(\"/api/talking-head/add-captions\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ videoUrl, words: transcribeData.words, customSettings: customSettingsOverride || captionSettings }),\n      });\n      const captionData = await captionRes.json();\n\n      if (!captionRes.ok) {\n        const reason = captionData.error || \"Unknown error\";\n        console.error(\"Caption burn-in failed:\", reason);\n        toast.warning(`Captions skipped: burn-in failed â€” ${reason}`);\n        updateJob(jobId, { status: \"completed\", videoUrl, words: transcribeData.words });\n        return;\n      }\n\n      updateJob(jobId, { status: \"completed\", captionedVideoUrl: captionData.signedUrl, videoAssetId: captionData.assetId, words: transcribeData.words });\n    } catch (err) {\n      const reason = err instanceof Error ? err.message : \"Unknown error\";\n      console.error(\"Caption error:\", err);\n      toast.warning(`Captions skipped: ${reason}`);\n      updateJob(jobId, { status: \"completed\", videoUrl });\n    }\n  }, [captionSettings]);\n\n  const handleRecaption = async () => {\n    if (!recaptionJobId) return;\n\n    const job = jobs.find((j) => j.id === recaptionJobId);\n    if (!job || !job.videoUrl || !job.words || !job.words.length) {\n      toast.error(\"Cannot re-caption: missing video or word timestamps\");\n      setRecaptionJobId(null);\n      return;\n    }\n\n    setRecaptioning(true);\n    try {\n      const captionRes = await fetch(\"/api/talking-head/add-captions\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ videoUrl: job.videoUrl, words: job.words, customSettings: recaptionSettings }),\n      });\n      const captionData = await captionRes.json();\n\n      if (!captionRes.ok) {\n        toast.error(captionData.error || \"Failed to re-caption video\");\n        setRecaptioning(false);\n        return;\n      }\n\n      updateJob(job.id, { captionedVideoUrl: captionData.signedUrl, videoAssetId: captionData.assetId });\n      toast.success(\"Captions updated successfully\");\n      setRecaptionJobId(null);\n    } catch (err) {\n      console.error(\"Re-caption error:\", err);\n      toast.error(\"Failed to re-caption video\");\n    } finally {\n      setRecaptioning(false);\n    }\n  };\n\n  const pollJob = useCallback(async (jobId: string, taskId: string, shouldCaption: boolean, audioSignedUrlForCaption: string) => {\n    pollingRefs.current.set(jobId, true);\n    let attempts = 0;\n    let consecutiveErrors = 0;\n\n    while (pollingRefs.current.get(jobId) && attempts < MAX_POLL_ATTEMPTS) {\n      attempts++;\n      updateJob(jobId, { pollCount: attempts });\n\n      try {\n        const res = await fetch(`/api/talking-head/status?taskId=${encodeURIComponent(taskId)}`);\n        const data = await res.json();\n\n        if (data.status === \"completed\" && data.videoUrl) {\n          pollingRefs.current.set(jobId, false);\n\n          if (shouldCaption) {\n            addCaptionsToJob(jobId, data.videoUrl, audioSignedUrlForCaption);\n          } else {\n            updateJob(jobId, { status: \"completed\", videoUrl: data.videoUrl });\n          }\n          return;\n        }\n\n        if (data.status === \"failed\") {\n          pollingRefs.current.set(jobId, false);\n          updateJob(jobId, { status: \"failed\", error: data.error || \"Video generation failed\" });\n          return;\n        }\n\n        consecutiveErrors = 0;\n        await new Promise((r) => setTimeout(r, POLL_INTERVAL_MS));\n      } catch (err) {\n        consecutiveErrors++;\n        console.warn(`Poll error for job ${jobId} (attempt ${attempts}):`, err);\n\n        if (consecutiveErrors >= 3) {\n          pollingRefs.current.set(jobId, false);\n          updateJob(jobId, { status: \"failed\", error: \"Network error after multiple retries\" });\n          return;\n        }\n\n        await new Promise((r) => setTimeout(r, POLL_INTERVAL_MS));\n      }\n    }\n\n    if (pollingRefs.current.get(jobId)) {\n      pollingRefs.current.set(jobId, false);\n      updateJob(jobId, { status: \"failed\", error: `Timed out after ${attempts} polls (${Math.round(attempts * POLL_INTERVAL_MS / 1000)}s)` });\n    }\n  }, [addCaptionsToJob]);\n\n  const processJob = useCallback(async (job: BulkJob, model: AiModelWithImages) => {\n    updateJob(job.id, { status: \"generating_voice\" });\n    try {\n      const ttsRes = await fetch(\"/api/tts/generate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ text: job.script, voice_id: model.voice_id, settings: model.voice_settings }),\n      });\n\n      if (!ttsRes.ok) {\n        const err = await ttsRes.json().catch(() => ({ error: \"TTS failed\" }));\n        updateJob(job.id, { status: \"failed\", error: err.error || \"TTS failed\" });\n        return;\n      }\n\n      const audioBlob = await ttsRes.blob();\n      const blobUrl = URL.createObjectURL(audioBlob);\n      updateJob(job.id, { audioUrl: blobUrl });\n\n      updateJob(job.id, { status: \"uploading_audio\" });\n      const formData = new FormData();\n      formData.append(\"file\", audioBlob, \"talking-head-audio.mp3\");\n\n      const uploadRes = await fetch(\"/api/talking-head/upload-audio\", { method: \"POST\", body: formData });\n      const uploadData = await uploadRes.json();\n      if (!uploadRes.ok) {\n        updateJob(job.id, { status: \"failed\", error: uploadData.error || \"Audio upload failed\" });\n        return;\n      }\n\n      updateJob(job.id, { audioSignedUrl: uploadData.signedUrl });\n\n      updateJob(job.id, { status: \"submitting\" });\n      const submitRes = await fetch(\"/api/talking-head/submit\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ audioSignedUrl: uploadData.signedUrl, imageSignedUrl: job.imageUrl, resolution }),\n      });\n\n      const submitData = await submitRes.json();\n      if (!submitRes.ok) {\n        updateJob(job.id, { status: \"failed\", error: submitData.error || \"Submit failed\" });\n        return;\n      }\n\n      updateJob(job.id, { status: \"polling\", taskId: submitData.taskId, pollCount: 0 });\n      pollJob(job.id, submitData.taskId, captionsEnabled, uploadData.signedUrl);\n    } catch (err) {\n      updateJob(job.id, { status: \"failed\", error: err instanceof Error ? err.message : \"Processing failed\" });\n    }\n  }, [resolution, captionsEnabled, pollJob]);\n\n  const handleRunAll = async () => {\n    if (!selectedModel) {\n      toast.error(\"Select an AI model first\");\n      return;\n    }\n\n    const emptyJobs = jobs.filter((j) => j.status === \"pending\" && j.script.trim() && !j.imageId && !j.imageUrl);\n    if (emptyJobs.length > 0) {\n      if (bulkImagePool.length < emptyJobs.length) {\n        toast.error(`Not enough images in pool. Need ${emptyJobs.length} image${emptyJobs.length === 1 ? \"\" : \"s\"}, have ${bulkImagePool.length}. Add more images or select manually.`);\n        return;\n      }\n\n      const { assignedCount, assignedJobIds } = assignPoolImages();\n      if (assignedCount === 0) {\n        toast.error(\"Failed to assign images from pool\");\n        return;\n      }\n\n      // Wait a tick for React state to update\n      await new Promise((resolve) => setTimeout(resolve, 50));\n\n      // Now read jobs again - they should have images\n      const allValidJobs = jobs.filter((j) => j.script.trim() && j.imageId && j.imageUrl && j.status === \"pending\");\n\n      if (allValidJobs.length === 0) {\n        toast.error(\"No valid jobs to process. Each needs a script and image.\");\n        return;\n      }\n\n      setRunning(true);\n      toast.info(`Starting ${allValidJobs.length} video generation${allValidJobs.length > 1 ? \"s\" : \"\"}...`);\n\n      for (const job of allValidJobs) {\n        processJob(job, selectedModel);\n      }\n    } else {\n      const validJobs = jobs.filter((j) => j.script.trim() && j.imageId && j.imageUrl && j.status === \"pending\");\n\n      if (validJobs.length === 0) {\n        toast.error(\"No valid jobs to process. Each needs a script and image.\");\n        return;\n      }\n\n      setRunning(true);\n      toast.info(`Starting ${validJobs.length} video generation${validJobs.length > 1 ? \"s\" : \"\"}...`);\n\n      for (const job of validJobs) {\n        processJob(job, selectedModel);\n      }\n    }\n  };\n\n  const handleSaveVideo = async (jobId: string, videoUrl: string) => {\n    try {\n      const res = await fetch(\"/api/talking-head/save\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ videoUrl }),\n      });\n      const data = await res.json();\n      if (res.ok) {\n        updateJob(jobId, { videoAssetId: data.assetId });\n        toast.success(\"Video saved to library!\");\n      } else {\n        toast.error(data.error || \"Failed to save\");\n      }\n    } catch {\n      toast.error(\"Failed to save video\");\n    }\n  };\n\n  const completedCount = jobs.filter((j) => j.status === \"completed\").length;\n  const failedCount = jobs.filter((j) => j.status === \"failed\").length;\n  const processingCount = jobs.filter(\n    (j) => j.status === \"generating_voice\" || j.status === \"uploading_audio\" || j.status === \"submitting\" || j.status === \"polling\" || j.status === \"captioning\"\n  ).length;\n  const allDone = running && processingCount === 0;\n  const emptyJobsCount = jobs.filter(j => j.status === \"pending\" && j.script.trim() && !j.imageId && !j.imageUrl).length;\n  const canRun = !running && selectedModelId && jobs.some((j) => j.script.trim() && (j.imageId || bulkImagePool.length >= emptyJobsCount));\n\n  return (\n    <div className=\"space-y-6\">\n      <StepSection\n        step={1}\n        title=\"Select AI Model & Resolution\"\n        description=\"Choose which AI model voice to use for narration and the output video resolution. Models need voice settings configured in the AI Models page.\"\n      >\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label>AI Model (Voice)</Label>\n            {voiceModels.length === 0 ? (\n              <Alert>\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  No AI models with voice configured. <a href=\"/dashboard/models\" className=\"underline font-medium\">Add voice settings</a>\n                </AlertDescription>\n              </Alert>\n            ) : (\n              <Select value={selectedModelId} onValueChange={setSelectedModelId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select AI model...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {voiceModels.map((m) => (\n                    <SelectItem key={m.id} value={m.id}>\n                      <span className=\"flex items-center gap-2\">\n                        {m.reference_images.length > 0 ? (\n                          <img src={m.reference_images[0].signed_url} alt=\"\" className=\"h-5 w-5 rounded-sm object-cover\" />\n                        ) : (\n                          <Mic className=\"h-3.5 w-3.5 text-muted-foreground\" />\n                        )}\n                        {m.name}\n                      </span>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Resolution</Label>\n            <Select value={resolution} onValueChange={setResolution}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"480p\">480p â€” $0.03/sec</SelectItem>\n                <SelectItem value=\"720p\">720p â€” $0.06/sec</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n      </StepSection>\n\n      <StepSection\n        step={2}\n        title=\"Captions (Optional)\"\n        description=\"Add auto-synced captions to your videos. Choose from TikTok-style presets or customize the look.\"\n      >\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Subtitles className=\"h-4 w-4 text-muted-foreground\" />\n              <Label>Add Captions</Label>\n            </div>\n            <Switch checked={captionsEnabled} onCheckedChange={setCaptionsEnabled} disabled={running} />\n          </div>\n\n          {captionsEnabled && !running && (\n            <CaptionCustomizerInline settings={captionSettings} onChange={setCaptionSettings} />\n          )}\n        </div>\n      </StepSection>\n\n      <StepSection\n        step={3}\n        title=\"Upload Images\"\n        description=\"Upload portrait images for your videos. Images are randomly assigned to scripts that don't have a manually selected image.\"\n      >\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-base\">Bulk Image Pool</Label>\n            {bulkImagePool.length > 0 && (\n              <button\n                type=\"button\"\n                onClick={clearBulkPool}\n                className=\"text-xs text-muted-foreground hover:text-destructive transition-colors\"\n              >\n                Clear All\n              </button>\n            )}\n          </div>\n\n          <div\n            onDragOver={handleBulkDragOver}\n            onDragLeave={handleBulkDragLeave}\n            onDrop={handleBulkDrop}\n            className={cn(\n              \"border-2 border-dashed rounded-lg p-4 transition-all\",\n              bulkDragOver ? \"border-accent-blue bg-accent-blue/5\" : \"hover:border-accent-blue/50\",\n              running ? \"opacity-50 pointer-events-none\" : \"\"\n            )}\n          >\n            <input\n              ref={bulkFileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={handleBulkFileSelect}\n              className=\"hidden\"\n            />\n\n            {bulkImagePool.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center gap-2 text-muted-foreground\">\n                {bulkUploading ? (\n                  <>\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\n                    <p className=\"text-sm\">Uploading images...</p>\n                  </>\n                ) : (\n                  <>\n                    <Upload className=\"h-8 w-8\" />\n                    <p className=\"text-sm\">Drop images here or click to browse</p>\n                  </>\n                )}\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                <p className=\"text-xs text-muted-foreground\">{bulkImagePool.length} image{bulkImagePool.length === 1 ? '' : 's'} in pool (randomly assigned to videos without images)</p>\n                <div className=\"flex gap-2 overflow-x-auto pb-1\">\n                  {bulkImagePool.map((img) => (\n                    <div key={img.id} className=\"relative group flex-shrink-0\">\n                      <img src={img.url} alt=\"\" className=\"h-16 w-16 rounded-md object-cover border\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => removeBulkImage(img.id)}\n                        className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-destructive text-destructive-foreground flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n                <div\n                  onClick={() => bulkFileInputRef.current?.click()}\n                  className=\"border border-dashed rounded-md px-3 py-1 text-xs text-muted-foreground hover:text-accent-blue cursor-pointer inline-flex items-center gap-1 w-fit\"\n                >\n                  <Plus className=\"h-3 w-3\" /> Add more\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </StepSection>\n\n      <StepSection\n        step={4}\n        title=\"Add Scripts\"\n        description=\"Add one or more scripts. Each script becomes a separate video. You can manually assign images or let the pool handle it.\"\n      >\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-base\">Videos ({jobs.length})</Label>\n            <Button variant=\"outline\" size=\"sm\" onClick={addJob} disabled={running}>\n              <Plus className=\"h-4 w-4 mr-1.5\" />\n              Add Video\n            </Button>\n          </div>\n\n        {jobs.map((job, idx) => (\n          <div\n            key={job.id}\n            className={cn(\n              \"rounded-lg p-4 space-y-3\",\n              job.status === \"completed\" && \"border border-green-500 bg-green-500/5\",\n              job.status === \"failed\" && \"border border-destructive bg-destructive/5\"\n            )}\n          >\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Video {idx + 1}</span>\n              <div className=\"flex items-center gap-2\">\n                <JobStatusBadge status={job.status} pollCount={job.pollCount} />\n                {!running && jobs.length > 1 && (\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => removeJob(job.id)} className=\"h-7 w-7 p-0\">\n                    <Trash2 className=\"h-3.5 w-3.5\" />\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {job.status === \"pending\" && (\n              <div className=\"grid grid-cols-1 sm:grid-cols-[1fr_auto] gap-3\">\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-xs\">Script</Label>\n                  <Textarea\n                    value={job.script}\n                    onChange={(e) => updateJob(job.id, { script: e.target.value })}\n                    placeholder=\"Paste the script for this video...\"\n                    rows={4}\n                    className=\"resize-y text-sm\"\n                    disabled={running}\n                  />\n                  <span className=\"text-xs text-muted-foreground\">{job.script.trim().split(/\\s+/).filter(Boolean).length} words</span>\n                </div>\n\n                <div className=\"space-y-1.5\"\n                  onDragOver={(e) => handleDragOver(e, job.id)}\n                  onDragLeave={handleDragLeave}\n                  onDrop={(e) => handleDrop(e, job.id)}>\n                  <Label className=\"text-xs\">Portrait</Label>\n                  {job.imageUrl ? (\n                    <div className=\"relative group\">\n                      <img\n                        src={job.imageUrl}\n                        alt=\"Selected\"\n                        className={cn(\n                          \"h-[106px] w-[106px] rounded-md object-cover border cursor-pointer\",\n                          dragOverJobId === job.id ? \"ring-2 ring-accent-blue ring-offset-2\" : \"\"\n                        )}\n                        onClick={() => !running && setPickerJobId(job.id)}\n                      />\n                      {!running && (\n                        <button\n                          type=\"button\"\n                          onClick={() => updateJob(job.id, { imageId: null, imageUrl: null })}\n                          className=\"absolute -top-1.5 -right-1.5 h-5 w-5 rounded-full bg-destructive text-destructive-foreground flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      )}\n                    </div>\n                  ) : (\n                    <button\n                      type=\"button\"\n                      onClick={() => setPickerJobId(job.id)}\n                      disabled={running}\n                      className={cn(\n                        \"h-[106px] w-[106px] rounded-md border-2 border-dashed flex flex-col items-center justify-center gap-1 text-muted-foreground transition-colors\",\n                        dragOverJobId === job.id ? \"border-accent-blue bg-accent-blue/10\" : \"hover:border-accent-blue/50 hover:text-accent-blue\"\n                      )}\n                    >\n                      <ImageIcon className=\"h-5 w-5\" />\n                      <span className=\"text-[10px]\">\n                        {dragOverJobId === job.id ? \"Drop image\" : \"Select\"}\n                      </span>\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {job.status !== \"pending\" && job.status !== \"completed\" && job.status !== \"failed\" && (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Loader2 className=\"h-3.5 w-3.5 animate-spin text-accent-blue\" />\n                  <span className=\"text-xs\">\n                    {job.status === \"generating_voice\" && \"Generating voice...\"}\n                    {job.status === \"uploading_audio\" && \"Uploading audio...\"}\n                    {job.status === \"submitting\" && \"Submitting video job...\"}\n                    {job.status === \"polling\" && `Generating video... ${Math.round((job.pollCount || 0) * 3)}s`}\n                    {job.status === \"captioning\" && \"Adding captions...\"}\n                  </span>\n                </div>\n                {job.status === \"polling\" && (\n                  <Progress value={Math.min(((job.pollCount || 0) / MAX_POLL_ATTEMPTS) * 100, 95)} className=\"h-1.5\" />\n                )}\n              </div>\n            )}\n\n            {job.status === \"failed\" && job.error && <p className=\"text-xs text-destructive\">{job.error}</p>}\n\n            {job.status === \"completed\" && (job.captionedVideoUrl || job.videoUrl) && (\n              <div className=\"space-y-2\">\n                {job.captionedVideoUrl && (\n                  <Badge variant=\"secondary\" className=\"gap-1 text-xs mb-1\">\n                    <Subtitles className=\"h-3 w-3\" />\n                    Captioned\n                  </Badge>\n                )}\n                <video\n                  controls\n                  src={job.captionedVideoUrl || job.videoUrl}\n                  className=\"w-full max-h-[200px] rounded-md bg-black\"\n                  preload=\"metadata\"\n                />\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      const a = document.createElement(\"a\");\n                      a.href = (job.captionedVideoUrl || job.videoUrl)!;\n                      a.download = `talking-head-${idx + 1}.mp4`;\n                      a.target = \"_blank\";\n                      a.click();\n                    }}\n                  >\n                    <Download className=\"h-3.5 w-3.5 mr-1\" />\n                    Download\n                  </Button>\n                  {job.words && job.words.length > 0 && job.videoUrl && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => {\n                        setRecaptionJobId(job.id);\n                        setRecaptionSettings({ ...DEFAULT_CAPTION_SETTINGS });\n                      }}\n                    >\n                      <Subtitles className=\"h-3.5 w-3.5 mr-1\" />\n                      Re-caption\n                    </Button>\n                  )}\n                  {job.videoAssetId ? (\n                    <Badge variant=\"secondary\" className=\"gap-1\">\n                      <CheckCircle2 className=\"h-3 w-3\" />\n                      Saved\n                    </Badge>\n                  ) : (\n                    <Button size=\"sm\" onClick={() => handleSaveVideo(job.id, (job.captionedVideoUrl || job.videoUrl)!)}>\n                      <Save className=\"h-3.5 w-3.5 mr-1\" />\n                      Save to Library\n                    </Button>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </StepSection>\n\n    {running && (\n        <div className=\"flex items-center gap-3 text-sm\">\n          {processingCount > 0 && (\n            <Badge variant=\"secondary\">\n              <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n              {processingCount} processing\n            </Badge>\n          )}\n          {completedCount > 0 && (\n            <Badge variant=\"secondary\" className=\"text-green-600\">\n              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n              {completedCount} completed\n            </Badge>\n          )}\n          {failedCount > 0 && (\n            <Badge variant=\"destructive\">\n              <AlertCircle className=\"h-3 w-3 mr-1\" />\n              {failedCount} failed\n            </Badge>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex gap-2\">\n        <Button onClick={handleRunAll} disabled={!canRun} size=\"lg\" className=\"flex-1\">\n          <Video className=\"h-4 w-4 mr-2\" />\n          {running\n            ? allDone\n              ? \"All Done\"\n              : `Processing ${processingCount} video${processingCount !== 1 ? \"s\" : \"\"}...`\n            : `Generate ${jobs.filter((j) => j.script.trim() && (j.imageId || bulkImagePool.length)).length} Video${emptyJobsCount > 0 ? ` (${emptyJobsCount} from pool)` : \"\"}`}\n        </Button>\n\n        {allDone && (\n          <Button\n            variant=\"outline\"\n            size=\"lg\"\n            onClick={() => {\n              setRunning(false);\n              setJobs([{ id: crypto.randomUUID(), script: \"\", imageId: null, imageUrl: null, status: \"pending\" }]);\n            }}\n          >\n            Start New Batch\n          </Button>\n        )}\n      </div>\n\n      <Dialog open={pickerJobId !== null} onOpenChange={(open) => !open && setPickerJobId(null)}>\n        <DialogContent className=\"max-w-2xl max-h-[80vh] flex flex-col\">\n          <DialogHeader>\n            <DialogTitle>Select Portrait Image</DialogTitle>\n          </DialogHeader>\n\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input placeholder=\"Search images...\" value={pickerSearch} onChange={(e) => handlePickerSearch(e.target.value)} className=\"pl-9\" />\n            </div>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handlePickerUpload}\n              className=\"hidden\"\n            />\n            <Button variant=\"outline\" size=\"sm\" onClick={() => fileInputRef.current?.click()} disabled={uploading}>\n              {uploading ? (\n                <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n              ) : (\n                <Upload className=\"h-4 w-4 mr-1\" />\n              )}\n              Upload\n            </Button>\n          </div>\n\n          {selectedModel && selectedModel.reference_images.length > 0 && (\n            <div>\n              <p className=\"text-xs font-medium mb-1.5\">{selectedModel.name}&apos;s Reference Images</p>\n              <div className=\"flex gap-1.5 overflow-x-auto pb-1\">\n                {selectedModel.reference_images.map((img) => (\n                  <button\n                    key={img.id}\n                    type=\"button\"\n                    className=\"h-14 w-14 rounded-md overflow-hidden border-2 border-transparent hover:border-accent-blue/50 transition-all flex-shrink-0\"\n                    onClick={() => handlePickerSelect(img)}\n                  >\n                    <img src={img.signed_url} alt=\"\" className=\"h-full w-full object-cover\" />\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <div className=\"flex-1 overflow-y-auto min-h-0\">\n            {pickerImages.length === 0 && !pickerLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <p className=\"text-sm text-muted-foreground\">No images found.</p>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-4 sm:grid-cols-5 gap-2 pb-2\">\n                {pickerImages.map((image) => (\n                  <button\n                    key={image.id}\n                    type=\"button\"\n                    className=\"relative aspect-square overflow-hidden rounded-md border-2 border-transparent hover:border-accent-blue/50 transition-all\"\n                    onClick={() => handlePickerSelect(image)}\n                  >\n                    <img src={image.signed_url} alt={image.filename} className=\"h-full w-full object-cover\" loading=\"lazy\" />\n                  </button>\n                ))}\n              </div>\n            )}\n\n            {pickerImages.length < pickerTotal && (\n              <div className=\"flex justify-center py-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={() => fetchPickerImages(true)} disabled={pickerLoading}>\n                  {pickerLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Load More\"}\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {pickerJobId && (\n            <p className=\"text-xs text-muted-foreground\">\n              Click an image to select it for this video. Uploaded images are auto-saved to your asset library.\n            </p>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={recaptionJobId !== null} onOpenChange={(open) => !open && setRecaptionJobId(null)}>\n        <DialogContent className=\"max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Re-caption Video</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 pt-4\">\n            <p className=\"text-sm text-muted-foreground\">\n              Choose new caption styles. This will regenerate the captioned video with your new settings.\n            </p>\n            <CaptionCustomizerInline settings={recaptionSettings} onChange={setRecaptionSettings} />\n            <div className=\"flex gap-2 justify-end pt-2\">\n              <Button variant=\"outline\" onClick={() => setRecaptionJobId(null)} disabled={recaptioning}>\n                Cancel\n              </Button>\n              <Button onClick={handleRecaption} disabled={recaptioning}>\n                {recaptioning ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Subtitles className=\"h-4 w-4 mr-2\" />}\n                {recaptioning ? \"Recaptioning...\" : \"Apply New Captions\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nfunction JobStatusBadge({ status, pollCount }: { status: BulkJob[\"status\"]; pollCount?: number }) {\n  switch (status) {\n    case \"pending\":\n      return <Badge variant=\"outline\" className=\"text-xs\">Pending</Badge>;\n    case \"generating_voice\":\n      return <Badge variant=\"secondary\" className=\"text-xs gap-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        Voice\n      </Badge>;\n    case \"uploading_audio\":\n      return <Badge variant=\"secondary\" className=\"text-xs gap-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        Upload\n      </Badge>;\n    case \"submitting\":\n      return <Badge variant=\"secondary\" className=\"text-xs gap-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        Submit\n      </Badge>;\n    case \"polling\":\n      return <Badge variant=\"secondary\" className=\"text-xs gap-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        {Math.round((pollCount || 0) * 3)}s\n      </Badge>;\n    case \"captioning\":\n      return <Badge variant=\"secondary\" className=\"text-xs gap-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        Captions\n      </Badge>;\n    case \"completed\":\n      return (\n        <Badge variant=\"secondary\" className=\"text-xs gap-1 text-green-600\">\n          <CheckCircle2 className=\"h-3 w-3\" />\n          Done\n        </Badge>\n      );\n    case \"failed\":\n      return (\n        <Badge variant=\"destructive\" className=\"text-xs gap-1\">\n          <AlertCircle className=\"h-3 w-3\" />\n          Failed\n        </Badge>\n      );\n  }\n}","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Label } from \"@/components/ui/label\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { CheckCircle2, RotateCcw, Palette, User, X, Save, RefreshCw } from \"lucide-react\";\nimport {\n  CAPTION_PRESETS,\n  CAPTION_FONTS,\n  DEFAULT_CAPTION_SETTINGS,\n} from \"@/lib/caption-styles\";\nimport type { CustomCaptionSettings } from \"@/lib/caption-styles\";\nimport type { CaptionPreset } from \"@/types\";\nimport {\n  getCaptionPresetsAction,\n  saveCaptionPresetAction,\n  deleteCaptionPresetAction,\n} from \"@/app/dashboard/tools/talking-head/caption-actions\";\n\n// Mini tooltip preview for preset buttons\nfunction MiniPreview({ presetSettings }: { presetSettings: CustomCaptionSettings }) {\n  const tooltipWords = [\"Hello\", \"World\"];\n  const tooltipHighlightIdx = 1;\n\n  return (\n    <div\n      className=\"relative rounded-lg overflow-hidden bg-gradient-to-b from-gray-800 via-gray-900 to-black\"\n      style={{ width: \"70px\", height: \"120px\" }}\n    >\n      {/* Caption preview positioned based on verticalPosition */}\n      <div\n        className=\"absolute left-0 right-0 flex items-center justify-center px-2\"\n        style={{ top: `${presetSettings.verticalPosition}%`, transform: \"translateY(-50%)\" }}\n      >\n        <div\n          className=\"inline-block px-1.5 py-0.5 rounded\"\n          style={{\n            backgroundColor: presetSettings.backgroundColor\n              ? `${presetSettings.backgroundColor}${Math.round((presetSettings.backgroundOpacity / 100) * 255).toString(16).padStart(2, \"0\")}`\n              : \"transparent\",\n          }}\n        >\n          <p\n            className=\"text-center leading-tight\"\n            style={{\n              fontFamily: presetSettings.fontFamily,\n              fontSize: `${Math.max(8, presetSettings.fontSize * 0.18)}px`,\n              fontWeight: presetSettings.bold ? 700 : 400,\n              fontStyle: presetSettings.italic ? \"italic\" : \"normal\",\n              textShadow: presetSettings.outlineWidth > 0\n                ? `0 0 ${presetSettings.outlineWidth * 1.5}px ${presetSettings.outlineColor},\n                   ${presetSettings.outlineWidth}px ${presetSettings.outlineWidth}px 0 ${presetSettings.outlineColor},\n                   -${presetSettings.outlineWidth}px -${presetSettings.outlineWidth}px 0 ${presetSettings.outlineColor},\n                   ${presetSettings.outlineWidth}px -${presetSettings.outlineWidth}px 0 ${presetSettings.outlineColor},\n                   -${presetSettings.outlineWidth}px ${presetSettings.outlineWidth}px 0 ${presetSettings.outlineColor}`\n                : \"none\",\n              letterSpacing: \"0.02em\",\n            }}\n          >\n            {tooltipWords.map((word, idx) => (\n              <span\n                key={idx}\n                style={{\n                  color: idx === tooltipHighlightIdx ? presetSettings.highlightColor : presetSettings.textColor,\n                }}\n              >\n                {word}{\" \"}\n              </span>\n            ))}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface CaptionCustomizerProps {\n  settings: CustomCaptionSettings;\n  onChange: (settings: CustomCaptionSettings) => void;\n  /** Compact mode shows fewer controls for inline usage */\n  compact?: boolean;\n}\n\nexport function CaptionCustomizer({\n  settings,\n  onChange,\n  compact = false,\n}: CaptionCustomizerProps) {\n  const [activePresetId, setActivePresetId] = useState<string | null>(\"classic-tiktok\");\n\n  const update = (partial: Partial<CustomCaptionSettings>) => {\n    setActivePresetId(null); // User customized â€” no preset active\n    onChange({ ...settings, ...partial });\n  };\n\n  const applyPreset = (presetId: string) => {\n    const preset = CAPTION_PRESETS.find((p) => p.id === presetId);\n    if (preset) {\n      setActivePresetId(presetId);\n      onChange({ ...preset.settings });\n    }\n  };\n\n  const resetToDefault = () => {\n    setActivePresetId(\"classic-tiktok\");\n    onChange({ ...DEFAULT_CAPTION_SETTINGS });\n  };\n\n  // Preview words\n  const previewWords = [\"This\", \"is\", \"a\", \"caption\", \"preview\"];\n  const visibleWords = previewWords.slice(0, Math.min(settings.wordsPerPage, previewWords.length));\n  const highlightIdx = Math.min(2, visibleWords.length - 1);\n\n  // Saved presets state\n  const [savedPresets, setSavedPresets] = useState<CaptionPreset[]>([]);\n  const [showPresetSave, setShowPresetSave] = useState(false);\n  const [presetName, setPresetName] = useState(\"\");\n  const [isSaving, setIsSaving] = useState(false);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [isReloadingPresets, setIsReloadingPresets] = useState(false);\n\n  // Fetch saved presets on mount\n  useEffect(() => {\n    getCaptionPresetsAction().then(({ presets }) => setSavedPresets(presets));\n  }, []);\n\n  const handleSavePreset = async () => {\n    if (!presetName.trim()) return;\n\n    setIsSaving(true);\n    try {\n      const { preset } = await saveCaptionPresetAction(presetName.trim(), settings as any);\n      if (preset) {\n        setShowPresetSave(false);\n        setPresetName(\"\");\n        setIsReloadingPresets(true);\n        const { presets: updated } = await getCaptionPresetsAction();\n        setSavedPresets(updated);\n        setIsReloadingPresets(false);\n      }\n    } catch {\n      // Error handled by action\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleDeletePreset = async (id: string) => {\n    setDeletingId(id);\n    try {\n      await deleteCaptionPresetAction(id);\n      setSavedPresets((prev) => prev.filter((p) => p.id !== id));\n    } catch {\n      // Error handled by action\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Presets row */}\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <Label className=\"text-xs font-medium\">Presets</Label>\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowPresetSave(true)}\n              className=\"h-6 px-2 text-xs text-muted-foreground\"\n              disabled={isSaving || isReloadingPresets}\n            >\n              <Save className=\"h-3 w-3 mr-1\" />\n              Save\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={resetToDefault}\n              className=\"h-6 px-2 text-xs text-muted-foreground\"\n            >\n              <RotateCcw className=\"h-3 w-3 mr-1\" />\n              Reset\n            </Button>\n          </div>\n        </div>\n\n        {showPresetSave && (\n          <div className=\"flex items-center gap-2\">\n            <Input\n              placeholder=\"Preset name...\"\n              value={presetName}\n              onChange={(e) => setPresetName(e.target.value)}\n              className=\"h-8 text-xs\"\n              autoFocus\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") handleSavePreset();\n                if (e.key === \"Escape\") setShowPresetSave(false);\n              }}\n            />\n            <Button\n              size=\"sm\"\n              onClick={handleSavePreset}\n              disabled={!presetName.trim() || isSaving}\n              className=\"h-8\"\n            >\n              {isSaving ? \"Saving...\" : \"Save\"}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => {\n                setShowPresetSave(false);\n                setPresetName(\"\");\n              }}\n              className=\"h-8\"\n            >\n              Cancel\n            </Button>\n          </div>\n        )}\n\n        <TooltipProvider>\n          <div className=\"flex gap-1.5 overflow-x-auto pb-1\">\n            {/* Built-in presets */}\n            {CAPTION_PRESETS.map((preset) => {\n              const isActive = activePresetId === preset.id || JSON.stringify(settings) === JSON.stringify(preset.settings);\n              return (\n                <Tooltip key={preset.id}>\n                  <TooltipTrigger asChild>\n                    <button\n                      type=\"button\"\n                      onClick={() => applyPreset(preset.id)}\n                      className={cn(\n                        \"relative flex-shrink-0 rounded-md border-2 px-2.5 py-1.5 text-xs font-medium transition-all\",\n                        isActive\n                          ? \"border-accent-blue bg-accent-blue/5\"\n                          : \"border-solid border-border bg-muted/50 hover:border-muted-foreground/30\"\n                      )}\n                    >\n                      {isActive && (\n                        <CheckCircle2 className=\"absolute -top-1 -right-1 h-3.5 w-3.5 text-accent-blue\" />\n                      )}\n                      {preset.name}\n                    </button>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"p-0\">\n                    <MiniPreview presetSettings={preset.settings} />\n                  </TooltipContent>\n                </Tooltip>\n              );\n            })}\n\n            {/* Saved user presets */}\n            {savedPresets.map((preset) => {\n              const presetSettings = preset.settings as unknown as CustomCaptionSettings;\n              const isActive = activePresetId === `saved-${preset.id}` || JSON.stringify(settings) === JSON.stringify(presetSettings);\n              return (\n                <Tooltip key={preset.id}>\n                  <TooltipTrigger asChild>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setActivePresetId(`saved-${preset.id}`);\n                        onChange({ ...presetSettings });\n                      }}\nclassName={cn(\n                          \"relative flex-shrink-0 rounded-md border-2 px-2.5 py-1.5 text-xs font-medium transition-all group\",\n                          isActive\n                            ? \"border-accent-blue bg-accent-blue/5\"\n                            : \"border-dashed border-border bg-muted/50 hover:border-muted-foreground/30\"\n                        )}\n                      >\n                      {isActive && (\n                        <CheckCircle2 className=\"absolute -top-1 -right-1 h-3.5 w-3.5 text-accent-blue\" />\n                      )}\n                      <div className=\"flex items-center gap-1.5\">\n                        <User className=\"h-3 w-3 text-muted-foreground\" />\n                        <span>{preset.name}</span>\n                      </div>\n                      {deletingId === preset.id ? (\n                        <RefreshCw className=\"absolute -top-1 -right-1 h-3 w-3 text-muted-foreground animate-spin\" />\n                      ) : (\n                        <button\n                          type=\"button\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeletePreset(preset.id);\n                          }}\n                          className=\"hidden group-hover:flex absolute -top-1 -right-1 h-4 w-4 rounded-full bg-destructive text-destructive-foreground items-center justify-center transition-opacity\"\n                        >\n                          <X className=\"h-2.5 w-2.5\" />\n                        </button>\n                      )}\n                    </button>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"p-0\">\n                    <MiniPreview presetSettings={presetSettings} />\n                  </TooltipContent>\n                </Tooltip>\n              );\n            })}\n          </div>\n        </TooltipProvider>\n      </div>\n\n      {/* Live preview */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium\">Preview</Label>\n        <div\n          className=\"relative rounded-lg overflow-hidden\"\n          style={{ aspectRatio: \"9/16\", maxHeight: compact ? \"180px\" : \"240px\" }}\n        >\n          {/* Dark video-like background */}\n          <div className=\"absolute inset-0 bg-gradient-to-b from-gray-800 via-gray-900 to-black\" />\n\n          {/* Caption preview positioned based on verticalPosition */}\n          <div\n            className=\"absolute left-0 right-0 flex items-center justify-center px-4\"\n            style={{ top: `${settings.verticalPosition}%`, transform: \"translateY(-50%)\" }}\n          >\n            <div\n              className=\"inline-block px-3 py-1.5 rounded\"\n              style={{\n                backgroundColor: settings.backgroundColor\n                  ? `${settings.backgroundColor}${Math.round((settings.backgroundOpacity / 100) * 255).toString(16).padStart(2, \"0\")}`\n                  : \"transparent\",\n              }}\n            >\n              <p\n                className=\"text-center leading-tight\"\n                style={{\n                  fontFamily: settings.fontFamily,\n                  fontSize: `${Math.max(10, settings.fontSize * (compact ? 0.22 : 0.28))}px`,\n                  fontWeight: settings.bold ? 700 : 400,\n                  fontStyle: settings.italic ? \"italic\" : \"normal\",\n                  textShadow: settings.outlineWidth > 0\n                    ? `0 0 ${settings.outlineWidth * 1.5}px ${settings.outlineColor},\n                       ${settings.outlineWidth}px ${settings.outlineWidth}px 0 ${settings.outlineColor},\n                       -${settings.outlineWidth}px -${settings.outlineWidth}px 0 ${settings.outlineColor},\n                       ${settings.outlineWidth}px -${settings.outlineWidth}px 0 ${settings.outlineColor},\n                       -${settings.outlineWidth}px ${settings.outlineWidth}px 0 ${settings.outlineColor}`\n                    : \"none\",\n                  letterSpacing: \"0.02em\",\n                }}\n              >\n                {visibleWords.map((word, idx) => (\n                  <span\n                    key={idx}\n                    style={{\n                      color: idx === highlightIdx ? settings.highlightColor : settings.textColor,\n                    }}\n                  >\n                    {word}{\" \"}\n                  </span>\n                ))}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Customization controls */}\n      <div className={cn(\"space-y-3\", compact && \"grid grid-cols-2 gap-x-4 gap-y-3 space-y-0\")}>\n        {/* Font */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Font</Label>\n          <Select value={settings.fontFamily} onValueChange={(v) => update({ fontFamily: v })}>\n            <SelectTrigger className=\"h-8 text-xs\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {CAPTION_FONTS.map((font) => (\n                <SelectItem key={font} value={font}>\n                  <span style={{ fontFamily: font }}>{font}</span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Font size */}\n        <div className=\"space-y-1.5\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-xs\">Size</Label>\n            <span className=\"text-[10px] text-muted-foreground\">{settings.fontSize}px</span>\n          </div>\n          <Slider\n            value={[settings.fontSize]}\n            onValueChange={([v]) => update({ fontSize: v })}\n            min={24}\n            max={80}\n            step={2}\n            className=\"w-full\"\n          />\n        </div>\n\n        {/* Text color */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Text Color</Label>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative\">\n              <input\n                type=\"color\"\n                value={settings.textColor}\n                onChange={(e) => update({ textColor: e.target.value })}\n                className=\"opacity-0 absolute inset-0 cursor-pointer\"\n              />\n              <div\n                className=\"h-6 w-8 rounded border border-border\"\n                style={{ backgroundColor: settings.textColor }}\n              />\n            </div>\n            <Input\n              type=\"text\"\n              value={settings.textColor}\n              onChange={(e) => update({ textColor: e.target.value })}\n              className=\"w-20 h-8 text-xs font-mono\"\n            />\n          </div>\n        </div>\n\n        {/* Highlight color */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Highlight</Label>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative\">\n              <input\n                type=\"color\"\n                value={settings.highlightColor}\n                onChange={(e) => update({ highlightColor: e.target.value })}\n                className=\"opacity-0 absolute inset-0 cursor-pointer\"\n              />\n              <div\n                className=\"h-6 w-8 rounded border border-border\"\n                style={{ backgroundColor: settings.highlightColor }}\n              />\n            </div>\n            <Input\n              type=\"text\"\n              value={settings.highlightColor}\n              onChange={(e) => update({ highlightColor: e.target.value })}\n              className=\"w-20 h-8 text-xs font-mono\"\n            />\n          </div>\n        </div>\n\n        {/* Background color & opacity */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Background</Label>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative\">\n              <input\n                type=\"color\"\n                value={settings.backgroundColor || \"#000000\"}\n                onChange={(e) => update({ backgroundColor: e.target.value })}\n                className=\"opacity-0 absolute inset-0 cursor-pointer\"\n              />\n              <div\n                className=\"h-6 w-8 rounded border border-border\"\n                style={{ backgroundColor: settings.backgroundColor || \"#000000\" }}\n              />\n            </div>\n            <Input\n              type=\"text\"\n              value={settings.backgroundColor}\n              onChange={(e) => update({ backgroundColor: e.target.value })}\n              className=\"w-20 h-8 text-xs font-mono\"\n            />\n            <span className=\"text-[10px] text-muted-foreground\">{settings.backgroundOpacity}%</span>\n            <Slider\n              value={[settings.backgroundOpacity]}\n              onValueChange={([v]) => update({ backgroundOpacity: v })}\n              min={10}\n              max={100}\n              step={5}\n              className=\"flex-1\"\n            />\n          </div>\n        </div>\n\n        {/* Outline color & width */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Outline</Label>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"relative\">\n              <input\n                type=\"color\"\n                value={settings.outlineColor}\n                onChange={(e) => update({ outlineColor: e.target.value })}\n                className=\"opacity-0 absolute inset-0 cursor-pointer\"\n              />\n              <div\n                className=\"h-6 w-8 rounded border border-border\"\n                style={{ backgroundColor: settings.outlineColor }}\n              />\n            </div>\n            <Slider\n              value={[settings.outlineWidth]}\n              onValueChange={([v]) => update({ outlineWidth: v })}\n              min={0}\n              max={5}\n              step={1}\n              className=\"flex-1\"\n            />\n            <span className=\"text-[10px] text-muted-foreground\">{settings.outlineWidth}px</span>\n          </div>\n        </div>\n\n        {/* Words per page */}\n        <div className=\"space-y-1.5\">\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-xs\">Words per Page</Label>\n            <span className=\"text-[10px] text-muted-foreground\">{settings.wordsPerPage}</span>\n          </div>\n          <Slider\n            value={[settings.wordsPerPage]}\n            onValueChange={([v]) => update({ wordsPerPage: v })}\n            min={2}\n            max={8}\n            step={1}\n            className=\"w-full\"\n          />\n        </div>\n\n        {/* Position */}\n        <div className=\"space-y-1.5\">\n          <Label className=\"text-xs\">Position</Label>\n          <Select value={settings.position} onValueChange={(v) => {\n            // Sync dropdown with verticalPosition\n            const newPos = v as CustomCaptionSettings[\"position\"];\n            const vPos = newPos === \"top\" ? 20 : newPos === \"center\" ? 50 : 70;\n            update({ position: newPos, verticalPosition: vPos });\n          }}>\n            <SelectTrigger className=\"h-8 text-xs\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"bottom\">Bottom</SelectItem>\n              <SelectItem value=\"center\">Center</SelectItem>\n              <SelectItem value=\"top\">Top</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {/* Vertical position slider (0 = top, 100 = bottom) */}\n          <div className=\"flex items-center gap-2 pt-1\">\n            <span className=\"text-[10px] text-muted-foreground w-3\">Top</span>\n            <Slider\n              value={[settings.verticalPosition]}\n              onValueChange={([v]) => {\n                // Update verticalPosition and sync dropdown to nearest position\n                const pos = v <= 33 ? \"top\" : v <= 66 ? \"center\" : \"bottom\";\n                update({ verticalPosition: v, position: pos });\n\n                // Also update internal position tracking if slider changes outside preset zones\n                activePresetId && setActivePresetId(null);\n              }}\n              min={0}\n              max={100}\n              step={1}\n              className=\"flex-1\"\n            />\n            <span className=\"text-[10px] text-muted-foreground w-3\">Btm</span>\n          </div>\n          <div className=\"text-center\">\n            <span className=\"text-[10px] text-muted-foreground\">{Math.round(settings.verticalPosition)}%</span>\n          </div>\n        </div>\n\n        {/* Bold & Italic toggles */}\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <Switch\n              checked={settings.bold}\n              onCheckedChange={(v) => update({ bold: v })}\n              className=\"scale-75\"\n            />\n            <Label className=\"text-xs font-bold\">Bold</Label>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Switch\n              checked={settings.italic}\n              onCheckedChange={(v) => update({ italic: v })}\n              className=\"scale-75\"\n            />\n            <Label className=\"text-xs italic\">Italic</Label>\n          </div>\n        </div>\n      </div>\n\n      {activePresetId && (\n        <div className=\"flex items-center gap-1.5\">\n          <Palette className=\"h-3 w-3 text-muted-foreground\" />\n          <span className=\"text-[10px] text-muted-foreground\">\n            Using preset: {CAPTION_PRESETS.find((p) => p.id === activePresetId)?.name}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/**\n * Compact inline caption customizer for use inside other components.\n * Renders the full CaptionCustomizer in compact mode directly â€” no toggle needed.\n */\nexport function CaptionCustomizerInline({\n  settings,\n  onChange,\n}: {\n  settings: CustomCaptionSettings;\n  onChange: (settings: CustomCaptionSettings) => void;\n}) {\n  return (\n    <CaptionCustomizer settings={settings} onChange={onChange} compact />\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Loader2,\n  Video,\n  AlertCircle,\n  CheckCircle2,\n  RefreshCw,\n  Subtitles,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { CaptionCustomizerInline } from \"./caption-customizer\";\nimport { DEFAULT_CAPTION_SETTINGS } from \"@/lib/caption-styles\";\nimport type { CustomCaptionSettings } from \"@/lib/caption-styles\";\nimport { getAudioDuration, calculateVideoCost, formatDuration } from \"@/lib/cost-estimation\";\n\ninterface StepVideoGenProps {\n  audioSignedUrl: string;\n  imageSignedUrl: string;\n  selectedImageUrl: string;\n  audioUrl: string;\n  script: string;\n  onVideoReady: (videoUrl: string, captionedVideoUrl?: string, captionedAssetId?: string) => void;\n}\n\nconst POLL_INTERVAL_MS = 3000;\nconst MAX_POLL_ATTEMPTS = 100; // ~5 minutes\n\ntype GenerationState =\n  | \"idle\"\n  | \"submitting\"\n  | \"polling\"\n  | \"transcribing\"\n  | \"burning\"\n  | \"completed\"\n  | \"failed\";\n\nexport function StepVideoGen({\n  audioSignedUrl,\n  imageSignedUrl,\n  selectedImageUrl,\n  audioUrl,\n  script,\n  onVideoReady,\n}: StepVideoGenProps) {\n  const [resolution, setResolution] = useState(\"480p\");\n  const [state, setState] = useState<GenerationState>(\"idle\");\n  const [taskId, setTaskId] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [pollCount, setPollCount] = useState(0);\n  const pollingRef = useRef(false);\n\n  // Caption settings\n  const [captionsEnabled, setCaptionsEnabled] = useState(false);\n  const [captionSettings, setCaptionSettings] = useState<CustomCaptionSettings>(\n    { ...DEFAULT_CAPTION_SETTINGS }\n  );\n\n  // Cost estimation\n  const [audioDuration, setAudioDuration] = useState<number | null>(null);\n\n  // Calculate audio duration\n  useEffect(() => {\n    const calculateDuration = async () => {\n      if (audioUrl) {\n        setAudioDuration(null);\n        const duration = await getAudioDuration(audioUrl);\n        setAudioDuration(duration);\n      }\n    };\n\n    calculateDuration();\n  }, [audioUrl]);\n\n  const addCaptions = useCallback(\n    async (videoUrl: string) => {\n      setState(\"transcribing\");\n\n      try {\n        // 1. Transcribe audio for word timestamps\n        const transcribeRes = await fetch(\"/api/talking-head/transcribe-audio\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ audioUrl: audioSignedUrl }),\n        });\n\n        const transcribeData = await transcribeRes.json();\n\n        if (!transcribeRes.ok || !transcribeData.words?.length) {\n          console.error(\"Caption transcription failed:\", transcribeData.error);\n          // Fallback: complete without captions\n          toast.warning(\"Could not transcribe audio for captions. Video saved without captions.\");\n          setState(\"completed\");\n          onVideoReady(videoUrl);\n          return;\n        }\n\n        // 2. Burn captions into video\n        setState(\"burning\");\n\n        const captionRes = await fetch(\"/api/talking-head/add-captions\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            videoUrl,\n            words: transcribeData.words,\n            customSettings: captionSettings,\n          }),\n        });\n\n        const captionData = await captionRes.json();\n\n        if (!captionRes.ok) {\n          console.error(\"Caption burn-in failed:\", captionData.error);\n          toast.warning(\"Could not add captions. Video saved without captions.\");\n          setState(\"completed\");\n          onVideoReady(videoUrl);\n          return;\n        }\n\n        setState(\"completed\");\n        toast.success(\"Video generated with captions!\");\n        onVideoReady(videoUrl, captionData.signedUrl, captionData.assetId);\n      } catch (err) {\n        console.error(\"Caption error:\", err);\n        toast.warning(\"Caption processing failed. Video saved without captions.\");\n        setState(\"completed\");\n        onVideoReady(videoUrl);\n      }\n    },\n    [audioSignedUrl, captionSettings, onVideoReady]\n  );\n\n  const startPolling = useCallback(\n    async (queueId: string) => {\n      pollingRef.current = true;\n      let attempts = 0;\n\n      while (pollingRef.current && attempts < MAX_POLL_ATTEMPTS) {\n        attempts++;\n        setPollCount(attempts);\n\n        try {\n          const res = await fetch(\n            `/api/talking-head/queue-status?queueId=${encodeURIComponent(queueId)}`\n          );\n          const data = await res.json();\n\n          if (!res.ok) {\n            setState(\"failed\");\n            setError(data.error || \"Failed to check status\");\n            pollingRef.current = false;\n            return;\n          }\n\n          if (data.status === \"completed\" && data.taskId) {\n            pollingRef.current = false;\n            setTaskId(data.taskId);\n            await startWaveSpeedPolling(data.taskId);\n            return;\n          }\n\n          if (data.status === \"failed\") {\n            setState(\"failed\");\n            setError(data.error || \"Video generation failed\");\n            pollingRef.current = false;\n            return;\n          }\n\n          await new Promise((resolve) =>\n            setTimeout(resolve, POLL_INTERVAL_MS)\n          );\n        } catch {\n          setState(\"failed\");\n          setError(\"Network error while checking status\");\n          pollingRef.current = false;\n          return;\n        }\n      }\n\n      if (pollingRef.current) {\n        setState(\"failed\");\n        setError(\"Video generation timed out. Please try again.\");\n        pollingRef.current = false;\n      }\n    },\n    [captionsEnabled, onVideoReady, addCaptions]\n  );\n\n  const startWaveSpeedPolling = useCallback(\n    async (taskId: string) => {\n      pollingRef.current = true;\n      let attempts = 0;\n\n      while (pollingRef.current && attempts < MAX_POLL_ATTEMPTS) {\n        attempts++;\n        setPollCount(attempts);\n\n        try {\n          const res = await fetch(\n            `/api/talking-head/status?taskId=${encodeURIComponent(taskId)}`\n          );\n          const data = await res.json();\n\n          if (!res.ok) {\n            setState(\"failed\");\n            setError(data.error || \"Failed to check status\");\n            pollingRef.current = false;\n            return;\n          }\n\n          if (data.status === \"completed\" && data.videoUrl) {\n            pollingRef.current = false;\n\n            if (captionsEnabled) {\n              // Run caption pipeline\n              addCaptions(data.videoUrl);\n            } else {\n              setState(\"completed\");\n              toast.success(\"Video generated successfully!\");\n              onVideoReady(data.videoUrl);\n            }\n            return;\n          }\n\n          if (data.status === \"failed\") {\n            setState(\"failed\");\n            setError(data.error || \"Video generation failed\");\n            pollingRef.current = false;\n            return;\n          }\n\n          await new Promise((resolve) =>\n            setTimeout(resolve, POLL_INTERVAL_MS)\n          );\n        } catch {\n          setState(\"failed\");\n          setError(\"Network error while checking status\");\n          pollingRef.current = false;\n          return;\n        }\n      }\n\n      if (pollingRef.current) {\n        setState(\"failed\");\n        setError(\"Video generation timed out. Please try again.\");\n        pollingRef.current = false;\n      }\n    },\n    [captionsEnabled, onVideoReady, addCaptions]\n  );\n\n  // Cleanup polling on unmount\n  useEffect(() => {\n    return () => {\n      pollingRef.current = false;\n    };\n  }, []);\n\n  const handleSubmit = async () => {\n    setState(\"submitting\");\n    setError(null);\n    setPollCount(0);\n\n    try {\n      const res = await fetch(\"/api/talking-head/queue\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          audioSignedUrl,\n          imageSignedUrl,\n          resolution,\n        }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setState(\"failed\");\n        setError(data.error || \"Failed to queue video generation\");\n        return;\n      }\n\n      setState(\"polling\");\n      toast.info(\"Job queued. You'll be notified when it starts...\");\n\n      // Start polling queue\n      startPolling(data.queueItem.id);\n    } catch {\n      setState(\"failed\");\n      setError(\"Failed to queue video generation\");\n    }\n  };\n\n  const handleRetry = () => {\n    setState(\"idle\");\n    setError(null);\n    setTaskId(null);\n    setPollCount(0);\n  };\n\n  const estimatedCost =\n    audioDuration !== null\n      ? calculateVideoCost(audioDuration, resolution as \"480p\" | \"720p\").cost\n      : null;\n\n  const elapsedSeconds = pollCount * (POLL_INTERVAL_MS / 1000);\n  const progressPercent =\n    state === \"transcribing\"\n      ? 85\n      : state === \"burning\"\n        ? 92\n        : Math.min((pollCount / MAX_POLL_ATTEMPTS) * 100, 80);\n\n  const isProcessing =\n    state === \"submitting\" ||\n    state === \"polling\" ||\n    state === \"transcribing\" ||\n    state === \"burning\";\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <Video className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Generate Talking Head Video</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Review your selections and generate the lip-synced video.\n        </p>\n      </div>\n\n      {/* Summary */}\n      <div className=\"rounded-lg bg-card p-4 space-y-3\">\n        <div className=\"flex gap-3\">\n          {/* Image preview */}\n          <img\n            src={selectedImageUrl}\n            alt=\"Selected portrait\"\n            className=\"h-20 w-20 rounded-md object-cover border\"\n          />\n          <div className=\"flex-1 space-y-1.5\">\n            {/* Audio preview */}\n            <div>\n              <p className=\"text-xs font-medium mb-1\">Audio</p>\n              <audio controls src={audioUrl} className=\"w-full h-8\" />\n            </div>\n            {/* Script excerpt */}\n            <div>\n              <p className=\"text-xs font-medium\">Script</p>\n              <p className=\"text-xs text-muted-foreground line-clamp-2\">\n                {script}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Settings (only in idle state) */}\n      {state === \"idle\" && (\n        <>\n          {/* Resolution */}\n          <div className=\"space-y-2\">\n            <Label>Resolution</Label>\n            <Select value={resolution} onValueChange={setResolution}>\n              <SelectTrigger className=\"w-full\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"480p\">\n                  480p â€” $0.03/sec (Recommended)\n                </SelectItem>\n                <SelectItem value=\"720p\">720p â€” $0.06/sec</SelectItem>\n              </SelectContent>\n            </Select>\n            <p className=\"text-xs text-muted-foreground\">\n              Minimum charge: $0.15. Max duration: 10 minutes.\n            </p>\n          </div>\n\n          {/* Captions toggle */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Subtitles className=\"h-4 w-4 text-muted-foreground\" />\n                <Label>Add Captions</Label>\n              </div>\n              <Switch\n                checked={captionsEnabled}\n                onCheckedChange={setCaptionsEnabled}\n              />\n            </div>\n\n            {captionsEnabled && (\n              <CaptionCustomizerInline\n                settings={captionSettings}\n                onChange={setCaptionSettings}\n              />\n            )}\n          </div>\n\n          {/* Cost Estimation */}\n          <div className=\"rounded-lg bg-card p-4 space-y-2\">\n            <p className=\"text-xs font-medium\">Estimated Cost</p>\n            {audioDuration === null ? (\n              <p className=\"text-sm text-muted-foreground\">Estimating...</p>\n            ) : (\n              <>\n                <div className=\"flex items-end gap-1\">\n                  <span className=\"text-xs text-muted-foreground\">Duration: </span>\n                  <span className=\"text-xs font-medium\">{formatDuration(audioDuration)}</span>\n                </div>\n                <div className=\"flex items-center justify-center py-2 bg-muted/50 rounded\">\n                  <span className=\"text-sm text-muted-foreground mr-2\">Total:</span>\n                  <span className=\"text-2xl font-semibold text-green-600\">\n                    $\n                    {calculateVideoCost(audioDuration, resolution as \"480p\" | \"720p\").cost.toFixed(\n                      2\n                    )}\n                  </span>\n                </div>\n                {audioDuration < 5 && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    âš ï¸ Minimum charge: $0.15 applies\n                  </p>\n                )}\n              </>\n            )}\n          </div>\n        </>\n      )}\n\n      {/* Status display */}\n      {isProcessing && (\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center gap-2\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-accent-blue\" />\n            <span className=\"text-sm font-medium\">\n              {state === \"submitting\" && \"Submitting...\"}\n              {state === \"polling\" && \"Generating video...\"}\n              {state === \"transcribing\" && \"Transcribing audio for captions...\"}\n              {state === \"burning\" && \"Burning captions into video...\"}\n            </span>\n            {state === \"polling\" && (\n              <span className=\"text-xs text-muted-foreground ml-auto\">\n                {Math.round(elapsedSeconds)}s elapsed\n              </span>\n            )}\n          </div>\n          <Progress value={progressPercent} className=\"h-2\" />\n          <p className=\"text-xs text-muted-foreground text-center\">\n            {state === \"polling\" && pollCount < 20 &&\n              \"Processing your video. This usually takes 1-3 minutes...\"}\n            {state === \"polling\" && pollCount >= 20 && pollCount < 60 &&\n              \"Still processing. Longer scripts take more time...\"}\n            {state === \"polling\" && pollCount >= 60 &&\n              \"Almost there. Please wait...\"}\n            {state === \"transcribing\" &&\n              \"Detecting word-level timing from your TTS audio...\"}\n            {state === \"burning\" &&\n              \"Rendering video with styled captions (this may take a minute)...\"}\n          </p>\n        </div>\n      )}\n\n      {state === \"completed\" && (\n        <div className=\"flex items-center gap-2\">\n          <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-sm font-medium\">\n            Video generated{captionsEnabled ? \" with captions\" : \"\"}!\n          </span>\n        </div>\n      )}\n\n      {/* Error */}\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* Action buttons */}\n      {state === \"idle\" && (\n        <Button onClick={handleSubmit} className=\"w-full\" size=\"lg\">\n          <Video className=\"h-4 w-4 mr-2\" />\n          Generate Video{captionsEnabled ? \" with Captions\" : \"\"}\n          {estimatedCost !== null && ` â€” Est. $${estimatedCost.toFixed(2)}`}\n        </Button>\n      )}\n\n      {state === \"failed\" && (\n        <Button onClick={handleRetry} variant=\"outline\" className=\"w-full\">\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Try Again\n        </Button>\n      )}\n\n      <p className=\"text-xs text-muted-foreground text-center\">\n        Powered by WaveSpeed InfiniteTalk.\n      </p>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport {\n  Download,\n  Save,\n  Play,\n  RefreshCw,\n  CheckCircle2,\n  Loader2,\n  AlertCircle,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\n\ninterface StepPreviewProps {\n  videoUrl: string;\n  videoAssetId: string | null;\n  onSaved: (assetId: string) => void;\n  onStartNew: () => void;\n}\n\nexport function StepPreview({\n  videoUrl,\n  videoAssetId,\n  onSaved,\n  onStartNew,\n}: StepPreviewProps) {\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSave = async () => {\n    setSaving(true);\n    setError(null);\n\n    try {\n      const res = await fetch(\"/api/talking-head/save\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ videoUrl }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Failed to save video\");\n        return;\n      }\n\n      toast.success(\"Video saved to asset library!\");\n      onSaved(data.assetId);\n    } catch {\n      setError(\"Failed to save video\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDownload = () => {\n    const a = document.createElement(\"a\");\n    a.href = videoUrl;\n    a.download = `talking-head-${Date.now()}.mp4`;\n    a.target = \"_blank\";\n    a.click();\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto space-y-4\">\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 rounded-full bg-accent-blue/10 flex items-center justify-center\">\n          <Play className=\"h-6 w-6 text-accent-blue\" />\n        </div>\n        <h2 className=\"text-lg font-semibold\">Video Ready</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Preview your talking head video below. Download or save it to your\n          asset library.\n        </p>\n      </div>\n\n      {/* Video player */}\n      <div className=\"rounded-lg overflow-hidden bg-black\">\n        <video\n          controls\n          src={videoUrl}\n          className=\"w-full max-h-[500px]\"\n          autoPlay={false}\n          preload=\"metadata\"\n        />\n      </div>\n\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex gap-2\">\n        <Button\n          variant=\"outline\"\n          onClick={handleDownload}\n          className=\"flex-1\"\n        >\n          <Download className=\"h-4 w-4 mr-2\" />\n          Download\n        </Button>\n\n        {videoAssetId ? (\n          <Button disabled className=\"flex-1\">\n            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n            Saved to Library\n          </Button>\n        ) : (\n          <Button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"flex-1\"\n          >\n            {saving ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Save to Library\n              </>\n            )}\n          </Button>\n        )}\n      </div>\n\n      <Button\n        variant=\"outline\"\n        onClick={onStartNew}\n        className=\"w-full\"\n      >\n        <RefreshCw className=\"h-4 w-4 mr-2\" />\n        Start New Video\n      </Button>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  ArrowLeft,\n  ArrowRight,\n  FileText,\n  Edit3,\n  Mic,\n  ImageIcon,\n  Video,\n  Play,\n  Link2,\n} from \"lucide-react\";\nimport { StepVideoUrl } from \"./step-video-url\";\nimport { StepTranscript } from \"./step-transcript\";\nimport { StepScriptEdit } from \"./step-script-edit\";\nimport { StepVoiceGen } from \"./step-voice-gen\";\nimport { StepImageSelect } from \"./step-image-select\";\nimport { StepVideoGen } from \"./step-video-gen\";\nimport { StepPreview } from \"./step-preview\";\nimport type { AiModelWithImages } from \"@/types\";\n\ninterface TalkingHeadWizardProps {\n  aiModels: AiModelWithImages[];\n  prefillVideoUrl?: string;\n}\n\nconst STEPS = [\n  { label: \"Video URL\", icon: Link2 },\n  { label: \"Transcript\", icon: FileText },\n  { label: \"Edit Script\", icon: Edit3 },\n  { label: \"Voice\", icon: Mic },\n  { label: \"Image\", icon: ImageIcon },\n  { label: \"Generate\", icon: Video },\n  { label: \"Preview\", icon: Play },\n] as const;\n\nexport function TalkingHeadWizard({ aiModels, prefillVideoUrl }: TalkingHeadWizardProps) {\n  const [step, setStep] = useState(1);\n\n  // Wizard state\n  const [videoUrl, setVideoUrl] = useState(prefillVideoUrl || \"\");\n  const [transcript, setTranscript] = useState(\"\");\n  const [editedScript, setEditedScript] = useState(\"\");\n  const [selectedModel, setSelectedModel] =\n    useState<AiModelWithImages | null>(null);\n  const [audioUrl, setAudioUrl] = useState<string | null>(null);\n  const [audioSignedUrl, setAudioSignedUrl] = useState<string | null>(null);\n  const [selectedImageUrl, setSelectedImageUrl] = useState<string | null>(null);\n  const [selectedImageId, setSelectedImageId] = useState<string | null>(null);\n  const [generatedVideoUrl, setGeneratedVideoUrl] = useState<string | null>(\n    null\n  );\n  const [captionedVideoUrl, setCaptionedVideoUrl] = useState<string | null>(\n    null\n  );\n  const [captionedAssetId, setCaptionedAssetId] = useState<string | null>(null);\n  const [videoAssetId, setVideoAssetId] = useState<string | null>(null);\n\n  // Can the user proceed forward?\n  const canProceed = useCallback((): boolean => {\n    switch (step) {\n      case 1:\n        return transcript.length > 0;\n      case 2:\n        return editedScript.length > 0;\n      case 3:\n        return editedScript.length > 0;\n      case 4:\n        return audioUrl !== null && audioSignedUrl !== null;\n      case 5:\n        return selectedImageUrl !== null;\n      case 6:\n        return generatedVideoUrl !== null;\n      case 7:\n        return true;\n      default:\n        return false;\n    }\n  }, [\n    step,\n    transcript,\n    editedScript,\n    audioUrl,\n    audioSignedUrl,\n    selectedImageUrl,\n    generatedVideoUrl,\n  ]);\n\n  const handleNext = useCallback(() => {\n    if (step < 7 && canProceed()) {\n      setStep((s) => s + 1);\n    }\n  }, [step, canProceed]);\n\n  const handleBack = useCallback(() => {\n    if (step > 1) {\n      setStep((s) => s - 1);\n    }\n  }, [step]);\n\n  const handleReset = useCallback(() => {\n    setStep(1);\n    setVideoUrl(\"\");\n    setTranscript(\"\");\n    setEditedScript(\"\");\n    setSelectedModel(null);\n    setAudioUrl(null);\n    setAudioSignedUrl(null);\n    setSelectedImageUrl(null);\n    setSelectedImageId(null);\n    setGeneratedVideoUrl(null);\n    setCaptionedVideoUrl(null);\n    setCaptionedAssetId(null);\n    setVideoAssetId(null);\n  }, []);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Step indicator */}\n      <div className=\"flex items-center gap-1 overflow-x-auto pb-2\">\n        {STEPS.map((s, idx) => {\n          const stepNum = idx + 1;\n          const isActive = step === stepNum;\n          const isCompleted = step > stepNum;\n          const StepIcon = s.icon;\n\n          return (\n            <div key={stepNum} className=\"flex items-center gap-1\">\n              {idx > 0 && (\n                <div\n                  className={cn(\n                    \"h-px w-4 sm:w-8\",\n                    isCompleted ? \"bg-accent-blue\" : \"bg-border\"\n                  )}\n                />\n              )}\n              <button\n                type=\"button\"\n                onClick={() => {\n                  if (isCompleted) setStep(stepNum);\n                }}\n                disabled={!isCompleted && !isActive}\n                className={cn(\n                  \"flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium transition-colors whitespace-nowrap\",\n                  isActive &&\n                    \"bg-accent-blue text-white\",\n                  isCompleted &&\n                    \"bg-accent-blue/10 text-accent-blue hover:bg-accent-blue/20 cursor-pointer\",\n                  !isActive &&\n                    !isCompleted &&\n                    \"bg-muted text-muted-foreground cursor-default\"\n                )}\n              >\n                <StepIcon className=\"h-3 w-3\" />\n                <span className=\"hidden sm:inline\">{s.label}</span>\n                <Badge\n                  variant={isActive ? \"secondary\" : \"outline\"}\n                  className=\"h-4 w-4 p-0 flex items-center justify-center text-[10px]\"\n                >\n                  {stepNum}\n                </Badge>\n              </button>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Step content */}\n      <div className=\"min-h-[400px]\">\n        {step === 1 && (\n          <StepVideoUrl\n            videoUrl={videoUrl}\n            onVideoUrlChange={setVideoUrl}\n            onTranscriptReady={(t) => {\n              setTranscript(t);\n              setEditedScript(t);\n              setStep(2);\n            }}\n          />\n        )}\n        {step === 2 && (\n          <StepTranscript\n            transcript={transcript}\n            onUseAsScript={() => {\n              setEditedScript(transcript);\n              setStep(3);\n            }}\n          />\n        )}\n        {step === 3 && (\n          <StepScriptEdit\n            script={editedScript}\n            onScriptChange={setEditedScript}\n          />\n        )}\n        {step === 4 && (\n          <StepVoiceGen\n            script={editedScript}\n            aiModels={aiModels}\n            selectedModel={selectedModel}\n            onModelChange={setSelectedModel}\n            audioUrl={audioUrl}\n            onAudioGenerated={(blobUrl, signedUrl) => {\n              setAudioUrl(blobUrl);\n              setAudioSignedUrl(signedUrl);\n            }}\n          />\n        )}\n        {step === 5 && (\n          <StepImageSelect\n            selectedModel={selectedModel}\n            selectedImageId={selectedImageId}\n            onImageSelect={(id, url) => {\n              setSelectedImageId(id);\n              setSelectedImageUrl(url);\n            }}\n          />\n        )}\n        {step === 6 && (\n          <StepVideoGen\n            audioSignedUrl={audioSignedUrl!}\n            imageSignedUrl={selectedImageUrl!}\n            selectedImageUrl={selectedImageUrl!}\n            audioUrl={audioUrl!}\n            script={editedScript}\n            onVideoReady={(url, captionedUrl, captAssetId) => {\n              setGeneratedVideoUrl(url);\n              if (captionedUrl) setCaptionedVideoUrl(captionedUrl);\n              if (captAssetId) setCaptionedAssetId(captAssetId);\n              setStep(7);\n            }}\n          />\n        )}\n        {step === 7 && (\n          <StepPreview\n            videoUrl={captionedVideoUrl || generatedVideoUrl!}\n            videoAssetId={captionedAssetId || videoAssetId}\n            onSaved={(assetId) => setVideoAssetId(assetId)}\n            onStartNew={handleReset}\n          />\n        )}\n      </div>\n\n      {/* Navigation buttons */}\n      <div className=\"flex items-center justify-between border-t pt-4\">\n        <Button\n          variant=\"outline\"\n          onClick={handleBack}\n          disabled={step === 1}\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back\n        </Button>\n\n        {step < 7 && step !== 6 && (\n          <Button onClick={handleNext} disabled={!canProceed()}>\n            Next\n            <ArrowRight className=\"h-4 w-4 ml-2\" />\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '14', x: '3', y: '5', rx: '2', ry: '2', key: '12ruh7' }],\n  ['path', { d: 'M7 15h4M15 15h2M7 11h2M13 11h4', key: '1ueiar' }],\n];\n\n/**\n * @component @name Captions\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTQiIHg9IjMiIHk9IjUiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNyAxNWg0TTE1IDE1aDJNNyAxMWgyTTEzIDExaDQiIC8+Cjwvc3ZnPg==) - https://lucide.dev/icons/captions\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Captions = createLucideIcon('captions', __iconNode);\n\nexport default Captions;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n];\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('user', __iconNode);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n];\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('rotate-ccw', __iconNode);\n\nexport default RotateCcw;\n","import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { usePrevious } from '@radix-ui/react-use-previous';\nimport { useSize } from '@radix-ui/react-use-size';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Switch\n * -----------------------------------------------------------------------------------------------*/\n\nconst SWITCH_NAME = 'Switch';\n\ntype ScopedProps<P> = P & { __scopeSwitch?: Scope };\nconst [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\n\ntype SwitchContextValue = { checked: boolean; disabled?: boolean };\nconst [SwitchProvider, useSwitchContext] = createSwitchContext<SwitchContextValue>(SWITCH_NAME);\n\ntype SwitchElement = React.ComponentRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface SwitchProps extends PrimitiveButtonProps {\n  checked?: boolean;\n  defaultChecked?: boolean;\n  required?: boolean;\n  onCheckedChange?(checked: boolean): void;\n}\n\nconst Switch = React.forwardRef<SwitchElement, SwitchProps>(\n  (props: ScopedProps<SwitchProps>, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = 'on',\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState<HTMLButtonElement | null>(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    const isFormControl = button ? form || !!button.closest('form') : true;\n    const [checked, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked ?? false,\n      onChange: onCheckedChange,\n      caller: SWITCH_NAME,\n    });\n\n    return (\n      <SwitchProvider scope={__scopeSwitch} checked={checked} disabled={disabled}>\n        <Primitive.button\n          type=\"button\"\n          role=\"switch\"\n          aria-checked={checked}\n          aria-required={required}\n          data-state={getState(checked)}\n          data-disabled={disabled ? '' : undefined}\n          disabled={disabled}\n          value={value}\n          {...switchProps}\n          ref={composedRefs}\n          onClick={composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              // if switch is in a form, stop propagation from the button so that we only propagate\n              // one click event (from the input). We propagate changes from an input so that native\n              // form validation works and form events reflect switch updates.\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })}\n        />\n        {isFormControl && (\n          <SwitchBubbleInput\n            control={button}\n            bubbles={!hasConsumerStoppedPropagationRef.current}\n            name={name}\n            value={value}\n            checked={checked}\n            required={required}\n            disabled={disabled}\n            form={form}\n            // We transform because the input is absolutely positioned but we have\n            // rendered it **after** the button. This pulls it back to sit on top\n            // of the button.\n            style={{ transform: 'translateX(-100%)' }}\n          />\n        )}\n      </SwitchProvider>\n    );\n  }\n);\n\nSwitch.displayName = SWITCH_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * SwitchThumb\n * -----------------------------------------------------------------------------------------------*/\n\nconst THUMB_NAME = 'SwitchThumb';\n\ntype SwitchThumbElement = React.ComponentRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface SwitchThumbProps extends PrimitiveSpanProps {}\n\nconst SwitchThumb = React.forwardRef<SwitchThumbElement, SwitchThumbProps>(\n  (props: ScopedProps<SwitchThumbProps>, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return (\n      <Primitive.span\n        data-state={getState(context.checked)}\n        data-disabled={context.disabled ? '' : undefined}\n        {...thumbProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nSwitchThumb.displayName = THUMB_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * SwitchBubbleInput\n * -----------------------------------------------------------------------------------------------*/\n\nconst BUBBLE_INPUT_NAME = 'SwitchBubbleInput';\n\ntype InputProps = React.ComponentPropsWithoutRef<typeof Primitive.input>;\ninterface SwitchBubbleInputProps extends Omit<InputProps, 'checked'> {\n  checked: boolean;\n  control: HTMLElement | null;\n  bubbles: boolean;\n}\n\nconst SwitchBubbleInput = React.forwardRef<HTMLInputElement, SwitchBubbleInputProps>(\n  (\n    {\n      __scopeSwitch,\n      control,\n      checked,\n      bubbles = true,\n      ...props\n    }: ScopedProps<SwitchBubbleInputProps>,\n    forwardedRef\n  ) => {\n    const ref = React.useRef<HTMLInputElement>(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n\n    // Bubble checked change to parents (e.g form change event)\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        'checked'\n      ) as PropertyDescriptor;\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event('click', { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n\n    return (\n      <input\n        type=\"checkbox\"\n        aria-hidden\n        defaultChecked={checked}\n        {...props}\n        tabIndex={-1}\n        ref={composedRefs}\n        style={{\n          ...props.style,\n          ...controlSize,\n          position: 'absolute',\n          pointerEvents: 'none',\n          opacity: 0,\n          margin: 0,\n        }}\n      />\n    );\n  }\n);\n\nSwitchBubbleInput.displayName = BUBBLE_INPUT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getState(checked: boolean) {\n  return checked ? 'checked' : 'unchecked';\n}\n\nconst Root = Switch;\nconst Thumb = SwitchThumb;\n\nexport {\n  createSwitchScope,\n  //\n  Switch,\n  SwitchThumb,\n  //\n  Root,\n  Thumb,\n};\nexport type { SwitchProps, SwitchThumbProps };\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z',\n      key: 'e79jfc',\n    },\n  ],\n  ['circle', { cx: '13.5', cy: '6.5', r: '.5', fill: 'currentColor', key: '1okk4w' }],\n  ['circle', { cx: '17.5', cy: '10.5', r: '.5', fill: 'currentColor', key: 'f64h9f' }],\n  ['circle', { cx: '6.5', cy: '12.5', r: '.5', fill: 'currentColor', key: 'qy21gx' }],\n  ['circle', { cx: '8.5', cy: '7.5', r: '.5', fill: 'currentColor', key: 'fotxhn' }],\n];\n\n/**\n * @component @name Palette\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJhMSAxIDAgMCAxIDAtMjAgMTAgOSAwIDAgMSAxMCA5IDUgNSAwIDAgMS01IDVoLTIuMjVhMS43NSAxLjc1IDAgMCAwLTEuNCAyLjhsLjMuNGExLjc1IDEuNzUgMCAwIDEtMS40IDIuOHoiIC8+CiAgPGNpcmNsZSBjeD0iMTMuNSIgY3k9IjYuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KICA8Y2lyY2xlIGN4PSIxNy41IiBjeT0iMTAuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KICA8Y2lyY2xlIGN4PSI2LjUiIGN5PSIxMi41IiByPSIuNSIgZmlsbD0iY3VycmVudENvbG9yIiAvPgogIDxjaXJjbGUgY3g9IjguNSIgY3k9IjcuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/palette\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Palette = createLucideIcon('palette', __iconNode);\n\nexport default Palette;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M13 21h8', key: '1jsn5i' }],\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name PenLine\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMgMjFoOCIgLz4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-line\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenLine = createLucideIcon('pen-line', __iconNode);\n\nexport default PenLine;\n","import type { WordTimestamp } from \"@/types\";\n\n/**\n * Caption style definition for ASS subtitle formatting.\n * Colors use ASS format: &HAABBGGRR (hex, alpha-blue-green-red).\n */\nexport interface CaptionStyle {\n  id: string;\n  name: string;\n  fontFamily: string;\n  fontSize: number;\n  primaryColor: string;     // Default text color (&HBBGGRR)\n  highlightColor: string;   // Active word color (&HBBGGRR)\n  outlineColor: string;     // Outline color\n  shadowColor: string;      // Shadow color\n  backgroundColor: string;  // Background box color (empty = no background)\n  outlineWidth: number;\n  shadowDepth: number;\n  bold: boolean;\n  italic: boolean;\n  alignment: number;        // ASS alignment (2 = bottom center)\n  marginV: number;          // Vertical margin from bottom\n  wordsPerPage: number;     // How many words shown at once\n  // CSS preview properties\n  previewBg: string;\n  previewText: string;\n  previewHighlight: string;\n}\n\n/**\n * User-customizable caption settings.\n * Uses standard hex colors (#RRGGBB) which get converted to ASS format internally.\n */\nexport interface CustomCaptionSettings {\n  fontFamily: string;\n  fontSize: number;          // 24-80\n  textColor: string;         // hex #RRGGBB\n  highlightColor: string;    // hex #RRGGBB\n  backgroundColor: string;   // hex #RRGGBB (empty = transparent)\n  backgroundOpacity: number; // 0-100\n  outlineColor: string;      // hex #RRGGBB\n  outlineWidth: number;      // 0-5\n  bold: boolean;\n  italic: boolean;\n  wordsPerPage: number;      // 2-8\n  position: \"bottom\" | \"center\" | \"top\";\n  verticalPosition: number;  // 0-100, percentage from top (0=top, 50=center, 100=bottom)\n}\n\n/**\n * Available font families for captions.\n */\nexport const CAPTION_FONTS = [\n  \"Arial\",\n  \"Helvetica\",\n  \"Impact\",\n  \"Georgia\",\n  \"Verdana\",\n  \"Trebuchet MS\",\n  \"Courier New\",\n  \"Comic Sans MS\",\n  \"Futura\",\n  \"Tahoma\",\n] as const;\n\n/**\n * Default custom caption settings.\n */\nexport const DEFAULT_CAPTION_SETTINGS: CustomCaptionSettings = {\n  fontFamily: \"Arial\",\n  fontSize: 60,\n  textColor: \"#FFFFFF\",\n  highlightColor: \"#FFFF00\",\n  backgroundColor: \"\",\n  backgroundOpacity: 60,\n  outlineColor: \"#000000\",\n  outlineWidth: 3,\n  bold: true,\n  italic: false,\n  wordsPerPage: 3,\n  position: \"center\",\n  verticalPosition: 50,\n};\n\n/**\n * Predefined caption style presets that users can start from.\n */\nexport const CAPTION_PRESETS: Array<{\n  id: string;\n  name: string;\n  settings: CustomCaptionSettings;\n  previewBg: string;\n  previewText: string;\n  previewHighlight: string;\n}> = [\n  {\n    id: \"classic-tiktok\",\n    name: \"Classic TikTok\",\n    settings: {\n      fontFamily: \"Impact\",\n      fontSize: 60,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#FFFF00\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#000000\",\n      outlineWidth: 3,\n      bold: true,\n      italic: false,\n      wordsPerPage: 2,\n      position: \"center\",\n      verticalPosition: 50,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-yellow-400\",\n  },\n  {\n    id: \"capcut-pop\",\n    name: \"CapCut Pop\",\n    settings: {\n      fontFamily: \"Arial\",\n      fontSize: 64,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#00D9FF\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#000000\",\n      outlineWidth: 4,\n      bold: true,\n      italic: false,\n      wordsPerPage: 2,\n      position: \"center\",\n      verticalPosition: 50,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-cyan-400\",\n  },\n  {\n    id: \"neon-highlight\",\n    name: \"Neon Highlight\",\n    settings: {\n      fontFamily: \"Arial\",\n      fontSize: 58,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#39FF14\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#00FF00\",\n      outlineWidth: 2,\n      bold: true,\n      italic: false,\n      wordsPerPage: 3,\n      position: \"center\",\n      verticalPosition: 50,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-lime-400\",\n  },\n  {\n    id: \"bold-minimal\",\n    name: \"Bold Minimal\",\n    settings: {\n      fontFamily: \"Arial\",\n      fontSize: 56,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#FFFFFF\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#000000\",\n      outlineWidth: 1,\n      bold: true,\n      italic: false,\n      wordsPerPage: 3,\n      position: \"center\",\n      verticalPosition: 50,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-white\",\n  },\n  {\n    id: \"warm-viral\",\n    name: \"Warm Viral\",\n    settings: {\n      fontFamily: \"Arial\",\n      fontSize: 62,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#FF6B35\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#4A2C2A\",\n      outlineWidth: 3,\n      bold: true,\n      italic: false,\n      wordsPerPage: 2,\n      position: \"center\",\n      verticalPosition: 50,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-orange-500\",\n  },\n  {\n    id: \"clean-subtitle\",\n    name: \"Clean Subtitle\",\n    settings: {\n      fontFamily: \"Arial\",\n      fontSize: 52,\n      textColor: \"#FFFFFF\",\n      highlightColor: \"#87CEEB\",\n      backgroundColor: \"\",\n      backgroundOpacity: 60,\n      outlineColor: \"#000000\",\n      outlineWidth: 2,\n      bold: false,\n      italic: false,\n      wordsPerPage: 3,\n      position: \"bottom\",\n      verticalPosition: 70,\n    },\n    previewBg: \"bg-black\",\n    previewText: \"text-white\",\n    previewHighlight: \"text-sky-400\",\n  },\n];\n\n// Keep backward compatibility\nexport const CAPTION_STYLES: CaptionStyle[] = CAPTION_PRESETS.map((p) =>\n  customSettingsToStyle(p.id, p.name, p.settings, p.previewBg, p.previewText, p.previewHighlight)\n);\n\n/**\n * Convert hex color (#RRGGBB) to ASS color format (&H00BBGGRR).\n * ASS uses BGR order with alpha prefix.\n */\nexport function hexToASS(hex: string, alpha: number = 0): string {\n  const clean = hex.replace(\"#\", \"\");\n  if (clean.length !== 6) return \"&H00FFFFFF\";\n  const r = clean.substring(0, 2);\n  const g = clean.substring(2, 4);\n  const b = clean.substring(4, 6);\n  const a = Math.round((alpha / 100) * 255)\n    .toString(16)\n    .padStart(2, \"0\")\n    .toUpperCase();\n  return `&H${a}${b}${g}${r}`.toUpperCase();\n}\n\n/**\n * Convert ASS color (&HAABBGGRR) back to hex (#RRGGBB).\n */\nexport function assToHex(ass: string): string {\n  const clean = ass.replace(\"&H\", \"\").replace(\"&h\", \"\");\n  if (clean.length < 6) return \"#FFFFFF\";\n  // Format: AABBGGRR â€” we need RR, GG, BB\n  const offset = clean.length === 8 ? 2 : 0;\n  const b = clean.substring(offset, offset + 2);\n  const g = clean.substring(offset + 2, offset + 4);\n  const r = clean.substring(offset + 4, offset + 6);\n  return `#${r}${g}${b}`;\n}\n\n/**\n * Convert CustomCaptionSettings to a CaptionStyle for ASS generation.\n */\nfunction customSettingsToStyle(\n  id: string,\n  name: string,\n  settings: CustomCaptionSettings,\n  previewBg: string = \"bg-black\",\n  previewText: string = \"text-white\",\n  previewHighlight: string = \"text-yellow-400\"\n): CaptionStyle {\n  // Calculate marginV and alignment from verticalPosition\n  // PlayResY is 1920 (9:16 portrait). For alignment 2 (bottom), marginV is distance from bottom.\n  const marginV = Math.round((1 - settings.verticalPosition / 100) * 1920);\n  \n  // Determine alignment based on verticalPosition zone\n  // 8 = top-center, 5 = center, 2 = bottom-center\n  const alignment = settings.verticalPosition <= 33 ? 8 : settings.verticalPosition <= 66 ? 5 : 2;\n\n  return {\n    id,\n    name,\n    fontFamily: settings.fontFamily,\n    fontSize: settings.fontSize,\n    primaryColor: hexToASS(settings.textColor),\n    highlightColor: hexToASS(settings.highlightColor),\n    outlineColor: hexToASS(settings.outlineColor),\n    shadowColor: settings.backgroundColor\n      ? hexToASS(settings.backgroundColor, 100 - settings.backgroundOpacity)\n      : hexToASS(\"#000000\", 80),\n    backgroundColor: settings.backgroundColor\n      ? hexToASS(settings.backgroundColor, 100 - settings.backgroundOpacity)\n      : \"\",\n    outlineWidth: settings.outlineWidth,\n    shadowDepth: settings.backgroundColor ? 0 : 2,\n    bold: settings.bold,\n    italic: settings.italic,\n    alignment,\n    marginV,\n    wordsPerPage: settings.wordsPerPage,\n    previewBg,\n    previewText,\n    previewHighlight,\n  };\n}\n\n/**\n * Convert seconds to ASS timestamp format: H:MM:SS.cc (centiseconds)\n */\nfunction toASSTime(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds % 3600) / 60);\n  const s = Math.floor(seconds % 60);\n  const cs = Math.round((seconds % 1) * 100);\n  return `${h}:${String(m).padStart(2, \"0\")}:${String(s).padStart(2, \"0\")}.${String(cs).padStart(2, \"0\")}`;\n}\n\n/**\n * Generate a complete ASS subtitle file with karaoke-style word highlighting.\n * Accepts either a CaptionStyle or CustomCaptionSettings.\n */\nexport function generateASS(\n  words: WordTimestamp[],\n  styleOrSettings: CaptionStyle | CustomCaptionSettings\n): string {\n  if (words.length === 0) return \"\";\n\n  // Convert CustomCaptionSettings to CaptionStyle if needed\n  const style: CaptionStyle = \"id\" in styleOrSettings\n    ? styleOrSettings\n    : customSettingsToStyle(\"custom\", \"Custom\", styleOrSettings);\n\n  // Determine if we should use a background box (BorderStyle 3)\n  const hasBackground = style.backgroundColor && style.backgroundColor !== \"\";\n  const borderStyle = hasBackground ? 3 : 1;\n  const backColour = hasBackground ? style.backgroundColor : style.shadowColor;\n\n  // Build header\n  const header = `[Script Info]\nTitle: Captions\nScriptType: v4.00+\nPlayResX: 1080\nPlayResY: 1920\nWrapStyle: 0\nScaledBorderAndShadow: yes\n\n[V4+ Styles]\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\nStyle: Default,${style.fontFamily},${style.fontSize},${style.primaryColor},${style.highlightColor},${style.outlineColor},${backColour},${style.bold ? -1 : 0},${style.italic ? -1 : 0},0,0,100,100,0,0,${borderStyle},${style.outlineWidth},${style.shadowDepth},${style.alignment},40,40,${style.marginV},1\n\n[Events]\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text`;\n\n  // Group words into pages\n  const pages: WordTimestamp[][] = [];\n  for (let i = 0; i < words.length; i += style.wordsPerPage) {\n    pages.push(words.slice(i, i + style.wordsPerPage));\n  }\n\n  // Generate dialogue events for each page\n  const events: string[] = [];\n\n  for (const page of pages) {\n    if (page.length === 0) continue;\n\n    const pageEnd = page[page.length - 1].end;\n\n    // For each word in the page, create a separate event where that word is highlighted\n    for (let wordIdx = 0; wordIdx < page.length; wordIdx++) {\n      const word = page[wordIdx];\n      const wordStart = word.start;\n      const wordEnd = wordIdx < page.length - 1\n        ? page[wordIdx + 1].start\n        : pageEnd;\n\n      // Build the text with override tags\n      const textParts = page.map((w, idx) => {\n        if (idx === wordIdx) {\n          return `{\\\\c${style.highlightColor}}${w.word}{\\\\c${style.primaryColor}}`;\n        }\n        return w.word;\n      });\n\n      const text = textParts.join(\" \");\n      events.push(\n        `Dialogue: 0,${toASSTime(wordStart)},${toASSTime(wordEnd)},Default,,0,0,0,,${text}`\n      );\n    }\n  }\n\n  return `${header}\\n${events.join(\"\\n\")}\\n`;\n}\n\n/**\n * Generate ASS from CustomCaptionSettings (convenience function for API route).\n */\nexport function generateASSFromCustom(\n  words: WordTimestamp[],\n  settings: CustomCaptionSettings\n): string {\n  return generateASS(words, settings);\n}\n\n/**\n * Get a caption style by ID. Falls back to \"bold-white\".\n */\nexport function getCaptionStyle(styleId: string): CaptionStyle {\n  return CAPTION_STYLES.find((s) => s.id === styleId) || CAPTION_STYLES[0];\n}\n\n/**\n * Get a preset by ID. Falls back to first preset.\n */\nexport function getCaptionPreset(presetId: string) {\n  return CAPTION_PRESETS.find((p) => p.id === presetId) || CAPTION_PRESETS[0];\n}\n"],"names":[],"mappings":"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","ignoreList":[5,7,19,20,21,22,23,24,25]}