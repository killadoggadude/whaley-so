module.exports=[47049,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(86192),f=a.i(91119),g=a.i(86304),h=a.i(35732),i=a.i(83415),j=a.i(70106);let k=(0,j.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var l=a.i(99464),m=a.i(81560);let n=(0,j.default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var o=a.i(4975);function p({model:a,onEdit:c,onDelete:e,onToggleActive:j}){let p=a.reference_images[0];return(0,b.jsxs)(f.Card,{className:"cursor-pointer overflow-hidden",onClick:()=>c(a),children:[(0,b.jsx)(f.CardHeader,{className:"p-0",children:(0,b.jsxs)("div",{className:"aspect-[4/3] overflow-hidden bg-muted relative",children:[p?(0,b.jsx)("img",{src:p.signed_url,alt:a.name,className:"h-full w-full object-cover",loading:"lazy"}):(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,b.jsx)(i.UserCircle,{className:"h-16 w-16 text-muted-foreground"})}),a.reference_images.length>1&&(0,b.jsxs)(g.Badge,{variant:"secondary",className:"absolute bottom-2 right-2 text-xs",children:["+",a.reference_images.length-1," images"]})]})}),(0,b.jsxs)(f.CardContent,{className:"p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm truncate",children:a.name}),(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 flex-shrink-0",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(k,{className:"h-4 w-4"})})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(h.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),c(a)},children:[(0,b.jsx)(l.Pencil,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),j(a.id)},children:[(0,b.jsx)(n,{className:"h-4 w-4 mr-2"}),a.is_active?"Deactivate":"Activate"]}),(0,b.jsxs)(h.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:b=>{b.stopPropagation(),e(a.id)},children:[(0,b.jsx)(m.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),a.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.description})]}),(0,b.jsxs)(f.CardFooter,{className:"px-4 pb-4 pt-0 gap-2 flex-wrap",children:[(0,b.jsx)(g.Badge,{variant:a.is_active?"default":"secondary",className:"text-xs",children:a.is_active?"Active":"Inactive"}),a.voice_id&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs gap-1",children:[(0,b.jsx)(o.Mic,{className:"h-3 w-3"}),"Voice set"]})]})]})}var q=a.i(14574),r=a.i(66718),s=a.i(70430),t=a.i(29246),u=a.i(85181),v=a.i(5084),w=a.i(87532),x=a.i(33441),y=a.i(96221),z=a.i(68114),A=a.i(50558);function B({open:a,onOpenChange:e,selectedIds:f,onConfirm:h,maxImages:i=10}){let[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(0),[n,o]=(0,c.useState)(!1),[p,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(new Map),v=(0,c.useRef)(void 0);(0,c.useEffect)(()=>{a&&B(!1)},[a]),(0,c.useEffect)(()=>{if(a&&j.length>0){let a=new Map;for(let b of j)f.includes(b.id)&&a.set(b.id,b);u(a)}},[a,j.length]);let B=(0,c.useCallback)(async a=>{o(!0);let b=a?j.length:0,c=await (0,A.getAssetsAction)({file_type:"image",search:p||void 0,sort_by:"created_at",sort_order:"desc",limit:30,offset:b});a?k(a=>[...a,...c.assets]):k(c.assets),m(c.total),o(!1)},[p,j.length]);return(0,b.jsx)(q.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(q.DialogContent,{className:"max-w-3xl max-h-[80vh] flex flex-col",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{children:"Select Reference Images"})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(w.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Input,{placeholder:"Search images...",value:p,onChange:a=>{s(a.target.value),clearTimeout(v.current),v.current=setTimeout(()=>{B(!1)},300)},className:"pl-9"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0",children:[0!==j.length||n?(0,b.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 pb-2",children:j.map(a=>{let c=t.has(a.id),d=t.size>=i&&!c;return(0,b.jsxs)("button",{type:"button",className:(0,z.cn)("relative aspect-square overflow-hidden rounded-md border-2 transition-all",c?"border-accent-blue ring-2 ring-accent-blue/20":"border-transparent hover:border-muted-foreground/30",d&&"opacity-40 cursor-not-allowed"),onClick:()=>!d&&void u(b=>{let c=new Map(b);return c.has(a.id)?c.delete(a.id):c.size<i&&c.set(a.id,a),c}),disabled:d,children:[(0,b.jsx)("img",{src:a.signed_url,alt:a.filename,className:"h-full w-full object-cover",loading:"lazy"}),c&&(0,b.jsx)("div",{className:"absolute inset-0 bg-accent-blue/20 flex items-center justify-center",children:(0,b.jsx)("div",{className:"h-6 w-6 rounded-full bg-accent-blue flex items-center justify-center",children:(0,b.jsx)(x.Check,{className:"h-4 w-4 text-primary-foreground"})})})]},a.id)})}):(0,b.jsx)("div",{className:"flex flex-col items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No images found. Upload images in the Asset Library first."})}),j.length<l&&(0,b.jsx)("div",{className:"flex justify-center py-2",children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>B(!0),disabled:n,children:n?(0,b.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):"Load More"})})]}),(0,b.jsxs)(q.DialogFooter,{className:"flex-row items-center justify-between sm:justify-between",children:[(0,b.jsxs)(g.Badge,{variant:"secondary",children:[t.size," / ",i," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:()=>{h(Array.from(t.values())),e(!1)},children:"Confirm Selection"})]})]})]})})}var C=a.i(15618),D=a.i(33508),E=a.i(79165),F=a.i(23292),G=a.i(5050);let H=(0,G.createServerReference)("40a12f5381cb8fa9c0774270bbd644b7eeb489d194",G.callServer,void 0,G.findSourceMapURL,"createModelAction"),I=(0,G.createServerReference)("605196c9e523bbfc5703794187d894c25dca1bcbd7",G.callServer,void 0,G.findSourceMapURL,"updateModelAction");function J({model:a,open:e,onOpenChange:f,onSave:g}){let h=!!a,[i,j]=(0,c.useState)(a?.name??""),[k,l]=(0,c.useState)(a?.description??""),[m,n]=(0,c.useState)(a?.reference_images??[]),[o,p]=(0,c.useState)(!1),[w,x]=(0,c.useState)(a?.voice_id??""),[z,A]=(0,c.useState)(a?.voice_settings?.stability??.5),[G,J]=(0,c.useState)(a?.voice_settings?.similarity_boost??.75),[K,L]=(0,c.useState)(a?.voice_settings?.style??0),[M,N]=(0,c.useState)(!1),O=b=>{b||(j(a?.name??""),l(a?.description??""),n(a?.reference_images??[]),x(a?.voice_id??""),A(a?.voice_settings?.stability??.5),J(a?.voice_settings?.similarity_boost??.75),L(a?.voice_settings?.style??0)),f(b)},P=async()=>{if(!i.trim())return void F.toast.error("Model name is required");N(!0);let b={name:i.trim(),description:k.trim(),voice_id:w.trim(),voice_settings:{stability:z,similarity_boost:G,style:K},reference_image_ids:m.map(a=>a.id)},c=h?await I(a.id,b):await H(b);N(!1),c.success?(F.toast.success(h?"Model updated":"Model created"),g(),O(!1)):F.toast.error(c.error||"Something went wrong")};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Dialog,{open:e,onOpenChange:O,children:(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{children:h?"Edit Model":"Create New Model"})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"model-name",children:"Name *"}),(0,b.jsx)(r.Input,{id:"model-name",placeholder:"e.g., Sarah Beach",value:i,onChange:a=>j(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"model-description",children:"Description"}),(0,b.jsx)(t.Textarea,{id:"model-description",placeholder:"Describe this AI model persona...",value:k,onChange:a=>l(a.target.value),rows:3})]})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(s.Label,{children:"Reference Images"}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>p(!0),children:[(0,b.jsx)(C.Plus,{className:"h-4 w-4 mr-1"}),"Add Images"]})]}),m.length>0?(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:m.map(a=>(0,b.jsxs)("div",{className:"relative h-20 w-20 rounded-md overflow-hidden border group",children:[(0,b.jsx)("img",{src:a.signed_url,alt:a.filename,className:"h-full w-full object-cover"}),(0,b.jsx)("button",{type:"button",className:"absolute top-0.5 right-0.5 h-5 w-5 rounded-full bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{var b;return b=a.id,void n(a=>a.filter(a=>a.id!==b))},children:(0,b.jsx)(D.X,{className:"h-3 w-3 text-white"})})]},a.id))}):(0,b.jsx)("div",{className:"flex items-center justify-center rounded-md border border-dashed p-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(E.ImageIcon,{className:"h-8 w-8 mx-auto text-muted-foreground mb-1"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"No reference images selected"})]})}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[m.length," of 10 images selected. Pick from your Asset Library."]})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(s.Label,{children:"Voice Settings"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"voice-id",className:"text-xs",children:"ElevenLabs Voice ID"}),(0,b.jsx)(r.Input,{id:"voice-id",placeholder:"e.g., EXAVITQu4vr4xnSDxMaL",value:w,onChange:a=>x(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Find voice IDs in your ElevenLabs dashboard"})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Voice Parameters"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(s.Label,{className:"text-xs",children:"Stability"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:z.toFixed(2)})]}),(0,b.jsx)(u.Slider,{value:[z],onValueChange:a=>A(a[0]),min:0,max:1,step:.05})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(s.Label,{className:"text-xs",children:"Clarity + Similarity"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:G.toFixed(2)})]}),(0,b.jsx)(u.Slider,{value:[G],onValueChange:a=>J(a[0]),min:0,max:1,step:.05})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(s.Label,{className:"text-xs",children:"Style Exaggeration"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:K.toFixed(2)})]}),(0,b.jsx)(u.Slider,{value:[K],onValueChange:a=>L(a[0]),min:0,max:1,step:.05})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:P,disabled:M||!i.trim(),children:M?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):h?"Save Changes":"Create Model"})]})]})]})}),(0,b.jsx)(B,{open:o,onOpenChange:p,selectedIds:m.map(a=>a.id),onConfirm:a=>{n(a)}})]})}let K=(0,G.createServerReference)("00daf52c11f2eafb32fbc5c1eb4185448d8497a782",G.callServer,void 0,G.findSourceMapURL,"getModelsAction"),L=(0,G.createServerReference)("4004454e18a9865c0fd1f4ee66dbff7625eac79992",G.callServer,void 0,G.findSourceMapURL,"deleteModelAction"),M=(0,G.createServerReference)("40a63ee65ce74884b7964547b99c47cc0aab018fe1",G.callServer,void 0,G.findSourceMapURL,"toggleModelActiveAction");function N({initialModels:a}){let[f,g]=(0,c.useState)(a),[h,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,q]=(0,c.useState)(null),r=async()=>{let a=await K();a.error||g(a.models)},s=()=>{l(null),j(!0)},t=a=>{l(a),j(!0)},u=a=>{q(a),n(!0)},v=async()=>{if(!o)return;let a=await L(o);a.success?(g(a=>a.filter(a=>a.id!==o)),F.toast.success("Model deleted")):F.toast.error(a.error),n(!1),q(null)},w=async a=>{let b=await M(a);b.success?g(b=>b.map(b=>b.id===a?{...b,is_active:!b.is_active}:b)):F.toast.error(b.error)},x=f.find(a=>a.id===o);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(d.Button,{onClick:s,children:[(0,b.jsx)(C.Plus,{className:"h-4 w-4 mr-2"}),"Create New Model"]})}),0===f.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16",children:[(0,b.jsx)(i.UserCircle,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No AI models yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Create your first AI model profile to get started"}),(0,b.jsxs)(d.Button,{onClick:s,variant:"outline",size:"sm",children:[(0,b.jsx)(C.Plus,{className:"h-4 w-4 mr-1"}),"Create Model"]})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:f.map(a=>(0,b.jsx)(p,{model:a,onEdit:t,onDelete:u,onToggleActive:w},a.id))}),(0,b.jsx)(J,{model:k,open:h,onOpenChange:j,onSave:r},k?.id??"create"),(0,b.jsx)(e.AlertDialog,{open:m,onOpenChange:n,children:(0,b.jsxs)(e.AlertDialogContent,{children:[(0,b.jsxs)(e.AlertDialogHeader,{children:[(0,b.jsx)(e.AlertDialogTitle,{children:"Delete Model"}),(0,b.jsxs)(e.AlertDialogDescription,{children:["Are you sure you want to delete"," ",(0,b.jsx)("strong",{children:x?.name}),"? This action cannot be undone."]})]}),(0,b.jsxs)(e.AlertDialogFooter,{children:[(0,b.jsx)(e.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(e.AlertDialogAction,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}a.s(["ModelList",()=>N],47049)}];

//# sourceMappingURL=src_components_models_model-list_tsx_95f32c04._.js.map