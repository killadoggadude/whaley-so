module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},78165,a=>{"use strict";var b=a.i(37936),c=a.i(18558),d=a.i(16349);async function e(a){try{let b=await (0,d.createClient)(),{data:{user:e}}=await b.auth.getUser();if(!e)return{success:!1,error:"Not authenticated"};let f=a.map(a=>({user_id:e.id,model_id:a.model_id,source_image_id:a.source_image_id,prompt_text:a.prompt_text,prompt_index:a.prompt_index,variation_label:a.variation_label,metadata:a.metadata||{}})),{error:g}=await b.from("prompts").insert(f);if(g)return{success:!1,error:g.message};return(0,c.revalidatePath)("/dashboard/tools/prompts"),{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to save prompts"}}}async function f(a){try{let b=await (0,d.createClient)(),{data:{user:c}}=await b.auth.getUser();if(!c)return{prompts:[],total:0,error:"Not authenticated"};let e=b.from("prompts").select("*",{count:"exact"}).eq("user_id",c.id);e=e.order("created_at",{ascending:!1});let f=a?.limit||30,g=a?.offset||0;e=e.range(g,g+f-1);let{data:h,error:i,count:j}=await e;if(i)return{prompts:[],total:0,error:i.message};let k=h||[],l=[...new Set(k.map(a=>a.source_image_id).filter(a=>null!==a))],m=new Map;if(l.length>0){let{data:a}=await b.from("assets").select("*").in("id",l);if(a&&a.length>0){let c=a.map(a=>a.file_path),{data:d}=await b.storage.from("assets").createSignedUrls(c,3600);for(let b=0;b<a.length;b++){let c=a[b],e=d?.[b]?.signedUrl||"";m.set(c.id,{...c,signed_url:e})}}}return{prompts:k.map(a=>({...a,source_image:a.source_image_id?m.get(a.source_image_id):void 0})),total:j||0}}catch(a){return{prompts:[],total:0,error:a instanceof Error?a.message:"Failed to fetch prompts"}}}async function g(a,b){try{let e=await (0,d.createClient)(),{data:{user:f}}=await e.auth.getUser();if(!f)return{success:!1,error:"Not authenticated"};let{error:g}=await e.from("prompts").update({prompt_text:b,is_edited:!0}).eq("id",a).eq("user_id",f.id);if(g)return{success:!1,error:g.message};return(0,c.revalidatePath)("/dashboard/tools/prompts"),{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to update prompt"}}}async function h(a){try{let b=await (0,d.createClient)(),{data:{user:e}}=await b.auth.getUser();if(!e)return{success:!1,error:"Not authenticated"};let{error:f}=await b.from("prompts").delete().eq("id",a).eq("user_id",e.id);if(f)return{success:!1,error:f.message};return(0,c.revalidatePath)("/dashboard/tools/prompts"),{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to delete prompt"}}}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h]),(0,b.registerServerReference)(e,"40cc7ce593799f345f22d67d5cee644da005a9b3ab",null),(0,b.registerServerReference)(f,"4080a7ba85e37fafbc4df09efa7c0c457b39cf3d12",null),(0,b.registerServerReference)(g,"603a2216d6dae2430e450d9d9d8657b8fbef47f05d",null),(0,b.registerServerReference)(h,"40886c4094dc8e7fa94b50409e37b3bd3c23af2705",null),a.s(["deletePromptAction",()=>h,"getPromptsAction",()=>f,"savePromptsAction",()=>e,"updatePromptAction",()=>g])},77950,a=>{"use strict";var b=a.i(78165);a.s([],14566),a.i(14566),a.s(["4080a7ba85e37fafbc4df09efa7c0c457b39cf3d12",()=>b.getPromptsAction,"40886c4094dc8e7fa94b50409e37b3bd3c23af2705",()=>b.deletePromptAction,"40cc7ce593799f345f22d67d5cee644da005a9b3ab",()=>b.savePromptsAction,"603a2216d6dae2430e450d9d9d8657b8fbef47f05d",()=>b.updatePromptAction],77950)}];

//# sourceMappingURL=_d0f51844._.js.map