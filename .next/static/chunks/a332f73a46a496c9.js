(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68499,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(30030),r=e.i(20783),l=e.i(26999),i=e.i(81140),o=e.i(91918),n="AlertDialog",[d,c]=(0,s.createContextScope)(n,[l.createDialogScope]),u=(0,l.createDialogScope)(),m=e=>{let{__scopeAlertDialog:a,...s}=e,r=u(a);return(0,t.jsx)(l.Root,{...r,...s,modal:!0})};m.displayName=n;var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,t.jsx)(l.Trigger,{...i,...r,ref:a})});x.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:a,...s}=e,r=u(a);return(0,t.jsx)(l.Portal,{...r,...s})};h.displayName="AlertDialogPortal";var g=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,t.jsx)(l.Overlay,{...i,...r,ref:a})});g.displayName="AlertDialogOverlay";var f="AlertDialogContent",[p,v]=d(f),j=(0,o.createSlottable)("AlertDialogContent"),b=a.forwardRef((e,s)=>{let{__scopeAlertDialog:o,children:n,...d}=e,c=u(o),m=a.useRef(null),x=(0,r.useComposedRefs)(s,m),h=a.useRef(null);return(0,t.jsx)(l.WarningProvider,{contentName:f,titleName:y,docsSlug:"alert-dialog",children:(0,t.jsx)(p,{scope:o,cancelRef:h,children:(0,t.jsxs)(l.Content,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:(0,i.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(j,{children:n}),(0,t.jsx)(A,{contentRef:m})]})})})});b.displayName=f;var y="AlertDialogTitle",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,t.jsx)(l.Title,{...i,...r,ref:a})});w.displayName=y;var N="AlertDialogDescription",k=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,t.jsx)(l.Description,{...i,...r,ref:a})});k.displayName=N;var S=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,t.jsx)(l.Close,{...i,...r,ref:a})});S.displayName="AlertDialogAction";var C="AlertDialogCancel",D=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...i}=e,{cancelRef:o}=v(C,s),n=u(s),d=(0,r.useComposedRefs)(a,o);return(0,t.jsx)(l.Close,{...n,...i,ref:d})});D.displayName=C;var A=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};e.s(["Action",()=>S,"AlertDialog",()=>m,"AlertDialogAction",()=>S,"AlertDialogCancel",()=>D,"AlertDialogContent",()=>b,"AlertDialogDescription",()=>k,"AlertDialogOverlay",()=>g,"AlertDialogPortal",()=>h,"AlertDialogTitle",()=>w,"AlertDialogTrigger",()=>x,"Cancel",()=>D,"Content",()=>b,"Description",()=>k,"Overlay",()=>g,"Portal",()=>h,"Root",()=>m,"Title",()=>w,"Trigger",()=>x,"createAlertDialogScope",()=>c],91162);var _=e.i(91162),_=_,z=e.i(75157),M=e.i(19455);function T({...e}){return(0,t.jsx)(_.Root,{"data-slot":"alert-dialog",...e})}function R({...e}){return(0,t.jsx)(_.Trigger,{"data-slot":"alert-dialog-trigger",...e})}function B({...e}){return(0,t.jsx)(_.Portal,{"data-slot":"alert-dialog-portal",...e})}function I({className:e,...a}){return(0,t.jsx)(_.Overlay,{"data-slot":"alert-dialog-overlay",className:(0,z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function P({className:e,size:a="default",...s}){return(0,t.jsxs)(B,{children:[(0,t.jsx)(I,{}),(0,t.jsx)(_.Content,{"data-slot":"alert-dialog-content","data-size":a,className:(0,z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 group/alert-dialog-content fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-lg",e),...s})]})}function L({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,z.cn)("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-6 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",e),...a})}function F({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,z.cn)("flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",e),...a})}function E({className:e,...a}){return(0,t.jsx)(_.Title,{"data-slot":"alert-dialog-title",className:(0,z.cn)("text-lg font-semibold sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",e),...a})}function U({className:e,...a}){return(0,t.jsx)(_.Description,{"data-slot":"alert-dialog-description",className:(0,z.cn)("text-muted-foreground text-sm",e),...a})}function O({className:e,variant:a="default",size:s="default",...r}){return(0,t.jsx)(M.Button,{variant:a,size:s,asChild:!0,children:(0,t.jsx)(_.Action,{"data-slot":"alert-dialog-action",className:(0,z.cn)(e),...r})})}function H({className:e,variant:a="outline",size:s="default",...r}){return(0,t.jsx)(M.Button,{variant:a,size:s,asChild:!0,children:(0,t.jsx)(_.Cancel,{"data-slot":"alert-dialog-cancel",className:(0,z.cn)(e),...r})})}e.s(["AlertDialog",()=>T,"AlertDialogAction",()=>O,"AlertDialogCancel",()=>H,"AlertDialogContent",()=>P,"AlertDialogDescription",()=>U,"AlertDialogFooter",()=>F,"AlertDialogHeader",()=>L,"AlertDialogTitle",()=>E,"AlertDialogTrigger",()=>R],68499)},72436,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),r="horizontal",l=["horizontal","vertical"],i=a.forwardRef((e,a)=>{var i;let{decorative:o,orientation:n=r,...d}=e,c=(i=n,l.includes(i))?n:r;return(0,t.jsx)(s.Primitive.div,{"data-orientation":c,...o?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});i.displayName="Separator",e.s(["Root",()=>i,"Separator",()=>i],86392);var o=e.i(86392),o=o,n=e.i(75157);function d({className:e,orientation:a="horizontal",decorative:s=!0,...r}){return(0,t.jsx)(o.Root,{"data-slot":"separator",decorative:s,orientation:a,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>d],72436)},55436,38162,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436);var a=e.i(95187);let s=(0,a.createServerReference)("40053fe9a2f7c6e98c710addb551de7b067aafee8f",a.callServer,void 0,a.findSourceMapURL,"getAssetsAction");e.s(["getAssetsAction",()=>s],38162)},93479,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},3408,e=>{"use strict";let t=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",()=>t])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},70273,56272,57428,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>a],70273);let s=(0,t.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>s],56272);var r=e.i(43476),l=e.i(78784),i=e.i(71645),o=e.i(20783),n=e.i(30030),d=e.i(81140),c=e.i(69340),u=e.i(99682),m=e.i(35804),x=e.i(96626),h=e.i(48425),g="Checkbox",[f,p]=(0,n.createContextScope)(g),[v,j]=f(g);function b(e){let{__scopeCheckbox:t,checked:a,children:s,defaultChecked:l,disabled:o,form:n,name:d,onCheckedChange:u,required:m,value:x="on",internal_do_not_use_render:h}=e,[f,p]=(0,c.useControllableState)({prop:a,defaultProp:l??!1,onChange:u,caller:g}),[j,b]=i.useState(null),[y,w]=i.useState(null),N=i.useRef(!1),k=!j||!!n||!!j.closest("form"),S={checked:f,disabled:o,setChecked:p,control:j,setControl:b,name:d,form:n,value:x,hasConsumerStoppedPropagationRef:N,required:m,defaultChecked:!A(l)&&l,isFormControl:k,bubbleInput:y,setBubbleInput:w};return(0,r.jsx)(v,{scope:t,...S,children:"function"==typeof h?h(S):s})}var y="CheckboxTrigger",w=i.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...s},l)=>{let{control:n,value:c,disabled:u,checked:m,required:x,setControl:g,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:v,bubbleInput:b}=j(y,e),w=(0,o.useComposedRefs)(l,g),N=i.useRef(m);return i.useEffect(()=>{let e=n?.form;if(e){let t=()=>f(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[n,f]),(0,r.jsx)(h.Primitive.button,{type:"button",role:"checkbox","aria-checked":A(m)?"mixed":m,"aria-required":x,"data-state":_(m),"data-disabled":u?"":void 0,disabled:u,value:c,...s,ref:w,onKeyDown:(0,d.composeEventHandlers)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.composeEventHandlers)(a,e=>{f(e=>!!A(e)||!e),b&&v&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});w.displayName=y;var N=i.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:l,defaultChecked:i,required:o,disabled:n,value:d,onCheckedChange:c,form:u,...m}=e;return(0,r.jsx)(b,{__scopeCheckbox:a,checked:l,defaultChecked:i,disabled:n,required:o,onCheckedChange:c,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{...m,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(D,{__scopeCheckbox:a})]})})});N.displayName=g;var k="CheckboxIndicator",S=i.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...l}=e,i=j(k,a);return(0,r.jsx)(x.Presence,{present:s||A(i.checked)||!0===i.checked,children:(0,r.jsx)(h.Primitive.span,{"data-state":_(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});S.displayName=k;var C="CheckboxBubbleInput",D=i.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:s,hasConsumerStoppedPropagationRef:l,checked:n,defaultChecked:d,required:c,disabled:x,name:g,value:f,form:p,bubbleInput:v,setBubbleInput:b}=j(C,e),y=(0,o.useComposedRefs)(a,b),w=(0,u.usePrevious)(n),N=(0,m.useSize)(s);i.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(w!==n&&e){let a=new Event("click",{bubbles:t});v.indeterminate=A(n),e.call(v,!A(n)&&n),v.dispatchEvent(a)}},[v,w,n,l]);let k=i.useRef(!A(n)&&n);return(0,r.jsx)(h.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??k.current,required:c,disabled:x,name:g,value:f,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function A(e){return"indeterminate"===e}function _(e){return A(e)?"indeterminate":e?"checked":"unchecked"}D.displayName=C,e.s(["Checkbox",()=>N,"CheckboxIndicator",()=>S,"Indicator",()=>S,"Root",()=>N,"createCheckboxScope",()=>p,"unstable_BubbleInput",()=>D,"unstable_CheckboxBubbleInput",()=>D,"unstable_CheckboxProvider",()=>b,"unstable_CheckboxTrigger",()=>w,"unstable_Provider",()=>b,"unstable_Trigger",()=>w],88474);var z=e.i(88474),z=z,M=e.i(75157);function T({className:e,...t}){return(0,r.jsx)(z.Root,{"data-slot":"checkbox",className:(0,M.cn)("peer border-input data-[state=checked]:bg-accent-blue data-[state=checked]:text-primary-foreground data-[state=checked]:border-accent-blue focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(z.Indicator,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,r.jsx)(l.CheckIcon,{className:"size-3.5"})})})}e.s(["Checkbox",()=>T],57428)},34223,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(69074),r=e.i(37727),l=e.i(75254);let i=(0,l.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var o=e.i(63209),n=e.i(31278),d=e.i(19455),c=e.i(75157),u=e.i(46696);function m({onUploadComplete:e}){let[l,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)([]),[g,f]=(0,a.useState)(!1),p=(0,a.useRef)(null),v=(0,a.useCallback)(e=>{let t=Array.from(e).map(e=>({file:e,status:"pending"}));h(e=>[...e,...t])},[]),j=(0,a.useCallback)(e=>{e.preventDefault(),m(!1),e.dataTransfer.files.length>0&&v(e.dataTransfer.files)},[v]),b=async()=>{f(!0);let t=0;for(let e=0;e<x.length;e++)if("done"!==x[e].status){h(t=>t.map((t,a)=>a===e?{...t,status:"uploading"}:t));try{let a=new FormData;a.append("file",x[e].file);let s=await fetch("/api/assets/upload",{method:"POST",body:a});if(!s.ok){let e=await s.json();throw Error(e.error||"Upload failed")}h(t=>t.map((t,a)=>a===e?{...t,status:"done"}:t)),t++}catch(t){h(a=>a.map((a,s)=>s===e?{...a,status:"error",error:t instanceof Error?t.message:"Upload failed"}:a))}}f(!1),t>0&&(u.toast.success(`Uploaded ${t} file${t>1?"s":""}`),e())},y=x.filter(e=>"done"!==e.status);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:(0,c.cn)("rounded-lg border-2 border-dashed p-8 text-center cursor-pointer transition-colors",l?"border-accent-blue bg-accent-blue/5":"border-muted-foreground/25 hover:border-muted-foreground/50"),onDragOver:e=>{e.preventDefault(),m(!0)},onDragLeave:()=>m(!1),onDrop:j,onClick:()=>p.current?.click(),children:[(0,t.jsx)(s.Upload,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Drag & drop files here, or click to browse"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Images, audio, video, PDF. Max 50MB each."}),(0,t.jsx)("input",{ref:p,type:"file",multiple:!0,accept:"image/*,audio/*,video/*,application/pdf",className:"hidden",onChange:e=>{e.target.files&&v(e.target.files),e.target.value=""}})]}),x.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[x.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-md border px-3 py-2 text-sm",children:["uploading"===e.status&&(0,t.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),"done"===e.status&&(0,t.jsx)(i,{className:"h-4 w-4 text-green-500"}),"error"===e.status&&(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4 text-destructive"}),"pending"===e.status&&(0,t.jsx)("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/30"}),(0,t.jsx)("span",{className:"flex-1 truncate",children:e.file.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,c.formatFileSize)(e.file.size)}),e.error&&(0,t.jsx)("span",{className:"text-xs text-destructive",children:e.error}),"uploading"!==e.status&&"done"!==e.status&&(0,t.jsx)(d.Button,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>{h(e=>e.filter((e,t)=>t!==a))},children:(0,t.jsx)(r.X,{className:"h-3 w-3"})})]},a)),y.length>0&&(0,t.jsx)(d.Button,{onClick:b,disabled:g,className:"w-full",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):`Upload ${y.length} file${y.length>1?"s":""}`}),x.length>0&&!g&&(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>h([]),className:"w-full",children:"Clear"})]})]})}var x=e.i(93479),h=e.i(67489),g=e.i(70273);let f=(0,l.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),p=(0,l.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var v=e.i(55436),j=e.i(56272);let b=[{label:"All",value:"all"},{label:"Images",value:"image"},{label:"Audio",value:"audio"},{label:"Video",value:"video"},{label:"Documents",value:"document"}];function y({search:e,onSearchChange:a,fileType:s,onFileTypeChange:r,favoritesOnly:l,onFavoritesToggle:i,sortBy:o,onSortChange:n,viewMode:u,onViewModeChange:m,aiModels:y,selectedModelId:w,onModelChange:N,selectionMode:k,onSelectionModeToggle:S}){return(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,t.jsx)(v.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(x.Input,{placeholder:"Search files...",value:e,onChange:e=>a(e.target.value),className:"pl-9"})]}),(0,t.jsx)("div",{className:"flex rounded-md border border-border",children:b.map(e=>(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",className:(0,c.cn)("rounded-none text-xs",("all"!==e.value||s)&&e.value!==s?"":"bg-muted"),onClick:()=>r("all"===e.value?void 0:e.value),children:e.label},e.value))}),y.length>0&&(0,t.jsxs)(h.Select,{value:w||"all",onValueChange:e=>N("all"===e||"__unassigned__"===e?void 0:e),children:[(0,t.jsx)(h.SelectTrigger,{className:"w-[160px]",children:(0,t.jsx)(h.SelectValue,{placeholder:"All Models"})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"all",children:"All Models"}),(0,t.jsx)(h.SelectItem,{value:"__unassigned__",children:"Unassigned"}),y.map(e=>(0,t.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(d.Button,{variant:l?"default":"outline",size:"sm",onClick:i,children:[(0,t.jsx)(g.Star,{className:(0,c.cn)("h-4 w-4 mr-1",l&&"fill-current")}),"Favorites"]}),(0,t.jsxs)(h.Select,{value:o,onValueChange:n,children:[(0,t.jsx)(h.SelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(h.SelectValue,{})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"created_at-desc",children:"Newest"}),(0,t.jsx)(h.SelectItem,{value:"created_at-asc",children:"Oldest"}),(0,t.jsx)(h.SelectItem,{value:"file_size-desc",children:"Largest"}),(0,t.jsx)(h.SelectItem,{value:"file_size-asc",children:"Smallest"}),(0,t.jsx)(h.SelectItem,{value:"filename-asc",children:"Name A-Z"}),(0,t.jsx)(h.SelectItem,{value:"filename-desc",children:"Name Z-A"})]})]}),(0,t.jsxs)("div",{className:"flex rounded-md border border-border",children:[(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",className:(0,c.cn)("rounded-none","grid"===u&&"bg-muted"),onClick:()=>m("grid"),children:(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",className:(0,c.cn)("rounded-none","list"===u&&"bg-muted"),onClick:()=>m("list"),children:(0,t.jsx)(p,{className:"h-4 w-4"})})]}),(0,t.jsxs)(d.Button,{variant:k?"default":"outline",size:"sm",onClick:S,children:[(0,t.jsx)(j.CheckSquare,{className:"h-4 w-4 mr-1"}),"Select"]})]})}var w=e.i(27612),N=e.i(3408),N=N,k=e.i(53339),S=e.i(78716),C=e.i(78583),D=e.i(87486),A=e.i(57428);let _={image:N.default,audio:k.Music,video:S.Video,document:C.FileText};function z({asset:e,viewMode:a,selectionMode:s,selected:r,onSelect:l,onFavorite:i,onDelete:o,onClick:n}){let u=_[e.file_type],m=()=>"image"===e.file_type&&e.signed_url?(0,t.jsx)("img",{src:e.signed_url,alt:e.filename,className:"h-full w-full object-cover",loading:"lazy",decoding:"async"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-muted",children:(0,t.jsx)(u,{className:"h-10 w-10 text-muted-foreground"})});return"list"===a?(0,t.jsxs)("div",{className:(0,c.cn)("group flex items-center gap-4 rounded-lg bg-card border border-border p-3 cursor-pointer transition-colors duration-200 hover:bg-card-hover",r&&"bg-accent-blue/5 ring-2 ring-accent-blue"),onClick:()=>s?l(e.id):n(e),children:[(0,t.jsx)("div",{className:(0,c.cn)("flex-shrink-0 transition-opacity",s?"opacity-100":"opacity-0 group-hover:opacity-100"),onClick:e=>e.stopPropagation(),children:(0,t.jsx)(A.Checkbox,{checked:r,onCheckedChange:()=>l(e.id)})}),(0,t.jsx)("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-md",children:m()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:e.filename}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:(0,c.formatFileSize)(e.file_size)}),(0,t.jsx)("span",{children:(0,c.formatDate)(e.created_at)})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:e.tags.slice(0,2).map(e=>(0,t.jsx)(D.Badge,{variant:"secondary",className:`text-xs ${(0,c.getTagColor)(e)}`,children:(0,c.formatTagLabel)(e)},e))}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Button,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),i(e.id)},children:(0,t.jsx)(g.Star,{className:(0,c.cn)("h-4 w-4",e.is_favorite&&"fill-yellow-400 text-yellow-400")})}),(0,t.jsx)(d.Button,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:t=>{t.stopPropagation(),o(e.id)},children:(0,t.jsx)(w.Trash2,{className:"h-4 w-4"})})]})]}):(0,t.jsxs)("div",{className:(0,c.cn)("group relative overflow-hidden rounded-lg bg-card border border-border cursor-pointer transition-colors duration-200 hover:bg-card-hover",r&&"ring-2 ring-accent-blue"),onClick:()=>s?l(e.id):n(e),children:[(0,t.jsx)("div",{className:(0,c.cn)("absolute top-2 left-2 z-10 transition-opacity",s?"opacity-100":"opacity-0 group-hover:opacity-100"),onClick:e=>e.stopPropagation(),children:(0,t.jsx)(A.Checkbox,{checked:r,onCheckedChange:()=>l(e.id),className:"bg-background/80 border-foreground/30"})}),(0,t.jsx)("div",{className:"aspect-square overflow-hidden",children:m()}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors pointer-events-none",children:(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto",children:[(0,t.jsx)(d.Button,{size:"sm",variant:"secondary",className:"h-7 w-7 p-0",onClick:t=>{t.stopPropagation(),i(e.id)},children:(0,t.jsx)(g.Star,{className:(0,c.cn)("h-3.5 w-3.5",e.is_favorite&&"fill-yellow-400 text-yellow-400")})}),(0,t.jsx)(d.Button,{size:"sm",variant:"secondary",className:"h-7 w-7 p-0",onClick:t=>{t.stopPropagation(),o(e.id)},children:(0,t.jsx)(w.Trash2,{className:"h-3.5 w-3.5"})})]})}),(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium truncate",children:e.filename}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,c.formatFileSize)(e.file_size)}),e.tags.length>0&&(0,t.jsxs)("div",{className:"flex gap-1 mt-1 flex-wrap",children:[e.tags.slice(0,2).map(e=>(0,t.jsx)(D.Badge,{variant:"secondary",className:`text-[10px] px-1 py-0 ${(0,c.getTagColor)(e)}`,children:(0,c.formatTagLabel)(e)},e)),e.tags.length>2&&(0,t.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:["+",e.tags.length-2]})]})]})]})}function M({assets:e,total:a,viewMode:r,selectionMode:l,selectedIds:i,onSelect:o,onLoadMore:n,onFavorite:c,onDelete:u,onClick:m,loading:x}){return 0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed py-16",children:[(0,t.jsx)(s.Upload,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No assets yet"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload files to get started"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Showing ",e.length," of ",a," assets",i.size>0&&(0,t.jsxs)("span",{className:"text-accent-blue font-medium",children:[" ","(",i.size," selected)"]})]}),"grid"===r?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:e.map(e=>(0,t.jsx)(z,{asset:e,viewMode:"grid",selectionMode:l,selected:i.has(e.id),onSelect:o,onFavorite:c,onDelete:u,onClick:m},e.id))}):(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsx)(z,{asset:e,viewMode:"list",selectionMode:l,selected:i.has(e.id),onSelect:o,onFavorite:c,onDelete:u,onClick:m},e.id))}),e.length<a&&(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsx)(d.Button,{variant:"outline",onClick:n,disabled:x,children:x?"Loading...":"Load More"})})]})}var T=e.i(76639),R=e.i(72436),B=e.i(40160),I=e.i(7233),P=e.i(95187);let L=(0,P.createServerReference)("602e1c845f8630f5f412531edc4cf883cf93a23a97",P.callServer,void 0,P.findSourceMapURL,"updateTagsAction");function F({asset:e,open:s,onOpenChange:l,onFavorite:i,onDelete:o,aiModels:n}){let[m,h]=(0,a.useState)(""),[f,p]=(0,a.useState)([]),[v,j]=(0,a.useState)(!1);if(e&&!v&&JSON.stringify(f)!==JSON.stringify(e.tags)&&p(e.tags),!e)return null;let b=e.ai_model_id&&n?n.find(t=>t.id===e.ai_model_id)?.name:void 0,y=async()=>{if(!m.trim())return;let t=[...f,m.trim().toLowerCase()];p(t),j(!0),h("");let a=await L(e.id,t);a.success||u.toast.error(a.error),j(!1)},N=async t=>{let a=f.filter(e=>e!==t);p(a),j(!0);let s=await L(e.id,a);s.success||u.toast.error(s.error),j(!1)};return(0,t.jsx)(T.Dialog,{open:s,onOpenChange:e=>{l(e),j(!1)},children:(0,t.jsxs)(T.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(T.DialogHeader,{children:(0,t.jsx)(T.DialogTitle,{className:"truncate",children:e.filename})}),(()=>{switch(e.file_type){case"image":return(0,t.jsx)("img",{src:e.signed_url,alt:e.filename,className:"max-h-[400px] w-full object-contain rounded-md bg-muted"});case"audio":return(0,t.jsx)("div",{className:"flex items-center justify-center p-8 bg-muted rounded-md",children:(0,t.jsx)("audio",{controls:!0,src:e.signed_url,className:"w-full"})});case"video":return(0,t.jsx)("video",{controls:!0,src:e.signed_url,className:"max-h-[400px] w-full rounded-md bg-muted"});case"document":return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-muted rounded-md",children:[(0,t.jsx)(C.FileText,{className:"h-16 w-16 text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.filename})]})}})(),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{let t=document.createElement("a");t.href=e.signed_url,t.download=e.filename,t.click()},children:[(0,t.jsx)(B.Download,{className:"h-4 w-4 mr-1"}),"Download"]}),(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>i(e.id),children:[(0,t.jsx)(g.Star,{className:(0,c.cn)("h-4 w-4 mr-1",e.is_favorite&&"fill-yellow-400 text-yellow-400")}),e.is_favorite?"Unfavorite":"Favorite"]}),(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>{o(e.id),l(!1)},children:[(0,t.jsx)(w.Trash2,{className:"h-4 w-4 mr-1"}),"Delete"]})]}),(0,t.jsx)(R.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Type:"})," ",e.file_type]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"MIME:"})," ",e.mime_type]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Size:"})," ",(0,c.formatFileSize)(e.file_size)]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created:"})," ",(0,c.formatDate)(e.created_at)]}),b&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Model:"})," ",(0,t.jsx)(D.Badge,{variant:"secondary",className:"text-xs",children:b})]})]}),(0,t.jsx)(R.Separator,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Tags"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[f.map(e=>(0,t.jsxs)(D.Badge,{variant:"secondary",className:`gap-1 ${(0,c.getTagColor)(e)}`,children:[(0,c.formatTagLabel)(e),(0,t.jsx)("button",{onClick:()=>N(e),children:(0,t.jsx)(r.X,{className:"h-3 w-3"})})]},e)),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(x.Input,{placeholder:"Add tag...",value:m,onChange:e=>h(e.target.value),onKeyDown:e=>"Enter"===e.key&&y(),className:"h-7 w-32 text-xs"}),(0,t.jsx)(d.Button,{size:"sm",variant:"ghost",className:"h-7",onClick:y,children:(0,t.jsx)(I.Plus,{className:"h-3 w-3"})})]})]})]})]})})}var E=e.i(68499);let U=(0,l.default)("folder-input",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]);function O({selectedCount:e,totalCount:s,aiModels:l,onSelectAll:i,onClearSelection:o,onBulkDownload:c,onBulkDelete:u,onBulkAssignModel:m,downloading:x,deleting:g,assigning:f}){let[p,v]=(0,a.useState)(0);if(0===e)return null;let j=x||g||f;return(0,t.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 rounded-lg border bg-background/95 backdrop-blur px-4 py-3 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium whitespace-nowrap",children:[(0,t.jsxs)("span",{children:[e," selected"]}),e<s&&(0,t.jsxs)(d.Button,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",onClick:i,children:["Select all ",s]})]}),(0,t.jsx)("div",{className:"h-6 w-px bg-border"}),(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:c,disabled:j,children:[x?(0,t.jsx)(n.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,t.jsx)(B.Download,{className:"h-4 w-4 mr-1"}),"Download"]}),l.length>0&&(0,t.jsxs)(h.Select,{onValueChange:e=>{m("__unassign__"===e?null:e),v(e=>e+1)},disabled:j,children:[(0,t.jsxs)(h.SelectTrigger,{className:"w-[180px] h-8",children:[f?(0,t.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(U,{className:"h-4 w-4"}),(0,t.jsx)(h.SelectValue,{placeholder:"Assign to Model"})]}),(0,t.jsxs)(h.SelectContent,{position:"popper",side:"top",align:"start",children:[(0,t.jsx)(h.SelectItem,{value:"__unassign__",children:"Remove from Model"}),l.map(e=>(0,t.jsx)(h.SelectItem,{value:e.id,children:e.name},e.id))]})]},p),(0,t.jsxs)(E.AlertDialog,{children:[(0,t.jsx)(E.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",disabled:j,children:[g?(0,t.jsx)(n.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,t.jsx)(w.Trash2,{className:"h-4 w-4 mr-1"}),"Delete"]})}),(0,t.jsxs)(E.AlertDialogContent,{children:[(0,t.jsxs)(E.AlertDialogHeader,{children:[(0,t.jsxs)(E.AlertDialogTitle,{children:["Delete ",e," asset",e>1?"s":"","?"]}),(0,t.jsxs)(E.AlertDialogDescription,{children:["This will permanently delete ",e," selected asset",e>1?"s":""," from storage. This action cannot be undone."]})]}),(0,t.jsxs)(E.AlertDialogFooter,{children:[(0,t.jsx)(E.AlertDialogCancel,{children:"Cancel"}),(0,t.jsxs)(E.AlertDialogAction,{onClick:u,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Delete ",e," asset",e>1?"s":""]})]})]})]}),(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:o,children:(0,t.jsx)(r.X,{className:"h-4 w-4"})})]})}var H=e.i(38162);let $=(0,P.createServerReference)("400f9cd13317e2cd5ffcd01c986e487acfed902af0",P.callServer,void 0,P.findSourceMapURL,"toggleFavoriteAction"),V=(0,P.createServerReference)("401a61d277e1e8de37b642ff39d23bca1ab85e7ae1",P.callServer,void 0,P.findSourceMapURL,"deleteAssetAction"),q=(0,P.createServerReference)("40b258e326f20bb2dbc968a496bcf015cdae5e7353",P.callServer,void 0,P.findSourceMapURL,"bulkDeleteAssetsAction"),K=(0,P.createServerReference)("607eee48e074499ac9911884e2acd0c8a36b9c8806",P.callServer,void 0,P.findSourceMapURL,"bulkAssignModelAction"),X=(0,P.createServerReference)("4066e82f12aa11473234b4a7222a4f5877a074ce8b",P.callServer,void 0,P.findSourceMapURL,"getSignedUrlsAction");function J({initialAssets:e,initialTotal:s,userTags:r,aiModels:l}){let[i,o]=(0,a.useState)(e),[n,d]=(0,a.useState)(s),[c,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),[f,p]=(0,a.useState)(),[v,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)("created_at-desc"),[N,k]=(0,a.useState)("grid"),[S,C]=(0,a.useState)(),[D,A]=(0,a.useState)(null),[_,z]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),[B,I]=(0,a.useState)(new Set),[P,L]=(0,a.useState)(!1),[E,U]=(0,a.useState)(!1),[J,Z]=(0,a.useState)(!1),W=(0,a.useRef)(void 0),Y=(0,a.useCallback)((e=0)=>{let[t,a]=b.split("-");return{file_type:f,is_favorite:!!v||void 0,search:h||void 0,ai_model_id:"__unassigned__"===S?null:S||void 0,sort_by:t,sort_order:a,limit:24,offset:e}},[f,v,h,b,S]),G=(0,a.useCallback)(async(e=!1)=>{x(!0);let t=e?i.length:0,a=await (0,H.getAssetsAction)(Y(t));a.error?u.toast.error(a.error):e?o(e=>[...e,...a.assets]):o(a.assets),d(a.total),x(!1)},[Y,i.length]);(0,a.useEffect)(()=>{I(new Set),G()},[f,v,b,S]);let Q=async e=>{let t=await $(e);t.success?(o(t=>t.map(t=>t.id===e?{...t,is_favorite:!t.is_favorite}:t)),D?.id===e&&A(e=>e?{...e,is_favorite:!e.is_favorite}:e)):u.toast.error(t.error)},ee=async e=>{let t=await V(e);t.success?(o(t=>t.filter(t=>t.id!==e)),d(e=>e-1),I(t=>{let a=new Set(t);return a.delete(e),a}),u.toast.success("Asset deleted")):u.toast.error(t.error)},et=async()=>{L(!0);let e=Array.from(B),t=await X(e);if(t.error)u.toast.error(t.error);else{for(let e of t.urls){let t=document.createElement("a");t.href=e.url,t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t),await new Promise(e=>setTimeout(e,300))}u.toast.success(`Downloading ${t.urls.length} files`)}L(!1)},ea=async()=>{U(!0);let e=Array.from(B),t=await q(e);t.success?(o(e=>e.filter(e=>!B.has(e.id))),d(e=>e-t.deletedCount),I(new Set),u.toast.success(`Deleted ${t.deletedCount} assets`)):u.toast.error(t.error),U(!1)},es=async e=>{Z(!0);let t=Array.from(B),a=await K(t,e);if(a.success){let a=e?l.find(t=>t.id===e)?.name||"model":"no model";u.toast.success(`Assigned ${t.length} assets to ${a}`),I(new Set),G()}else u.toast.error(a.error);Z(!1)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(m,{onUploadComplete:()=>G()}),(0,t.jsx)(y,{search:h,onSearchChange:e=>{g(e),clearTimeout(W.current),W.current=setTimeout(()=>{I(new Set),G()},300)},fileType:f,onFileTypeChange:p,favoritesOnly:v,onFavoritesToggle:()=>j(!v),sortBy:b,onSortChange:w,viewMode:N,onViewModeChange:k,aiModels:l,selectedModelId:S,onModelChange:e=>{C(e)},selectionMode:T,onSelectionModeToggle:()=>{T&&I(new Set),R(!T)}}),(0,t.jsx)(M,{assets:i,total:n,viewMode:N,selectionMode:T,selectedIds:B,onSelect:e=>{I(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}),T||R(!0)},onLoadMore:()=>G(!0),onFavorite:Q,onDelete:ee,onClick:e=>{A(e),z(!0)},loading:c}),(0,t.jsx)(F,{asset:D,open:_,onOpenChange:z,onFavorite:Q,onDelete:ee,aiModels:l}),(0,t.jsx)(O,{selectedCount:B.size,totalCount:n,aiModels:l,onSelectAll:()=>{I(new Set(i.map(e=>e.id)))},onClearSelection:()=>{I(new Set),R(!1)},onBulkDownload:et,onBulkDelete:ea,onBulkAssignModel:es,downloading:P,deleting:E,assigning:J})]})}e.s(["AssetLibrary",()=>J],34223)}]);